{"version":3,"file":"src_app_pages_dices_dices_module_ts.js","mappings":"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","sources":["./src/app/data/target-type-damage.ts","./src/app/pages/dices/combat-dice/combat-dice.component.ts","./src/app/pages/dices/d20-dice/d20-dice.component.ts","./src/app/pages/dices/dices.module.ts","./src/app/pages/dices/dices.pages.ts","./src/app/pages/dices/target-dice/target-dice.component.ts","./src/app/pipes/dice-details.pipe.ts","./node_modules/dice-typescript/dist/ast/expression-node.class.js","./node_modules/dice-typescript/dist/ast/factory.class.js","./node_modules/dice-typescript/dist/ast/index.js","./node_modules/dice-typescript/dist/ast/node-attributes.class.js","./node_modules/dice-typescript/dist/ast/node-type.enum.js","./node_modules/dice-typescript/dist/dice.class.js","./node_modules/dice-typescript/dist/generator/dice-generator.class.js","./node_modules/dice-typescript/dist/generator/index.js","./node_modules/dice-typescript/dist/index.js","./node_modules/dice-typescript/dist/interpreter/default-function-definitions.js","./node_modules/dice-typescript/dist/interpreter/dice-interpreter.class.js","./node_modules/dice-typescript/dist/interpreter/dice-result.class.js","./node_modules/dice-typescript/dist/interpreter/error-message.class.js","./node_modules/dice-typescript/dist/interpreter/function-definition-list.class.js","./node_modules/dice-typescript/dist/interpreter/index.js","./node_modules/dice-typescript/dist/interpreter/result.class.js","./node_modules/dice-typescript/dist/lexer/dice-lexer.class.js","./node_modules/dice-typescript/dist/lexer/index.js","./node_modules/dice-typescript/dist/lexer/non-global-definition-error.class.js","./node_modules/dice-typescript/dist/lexer/string-character-stream.class.js","./node_modules/dice-typescript/dist/lexer/token-type.enum.js","./node_modules/dice-typescript/dist/lexer/token.class.js","./node_modules/dice-typescript/dist/parser/basic-parser.class.js","./node_modules/dice-typescript/dist/parser/dice-parser.class.js","./node_modules/dice-typescript/dist/parser/error-message.class.js","./node_modules/dice-typescript/dist/parser/index.js","./node_modules/dice-typescript/dist/parser/parse-result.class.js","./node_modules/dice-typescript/dist/random/default-random-provider.class.js","./node_modules/dice-typescript/dist/random/index.js","./node_modules/random-js/lib/random.js"],"sourcesContent":["export type EnemyType = 'HUMAN' | 'QUADRUPEDE' | 'FLYINGINSECT' | 'ROBOT';\r\n\r\nexport const TARGET_TYPE_DATA = {\r\n  'HUMAN': {\r\n    '1-2': 'Tête',\r\n    '3-8': 'Torse',\r\n    '9-11': 'Bras gauche',\r\n    '12-14': 'Bras droit',\r\n    '15-17': 'Jambe gauche',\r\n    '18-20': 'Jambe droite'\r\n  },\r\n  'QUADRUPEDE': {\r\n    '1-2': 'Tête',\r\n    '3-8': 'Torse',\r\n    '9-11': 'Patte avant gauche',\r\n    '12-14': 'Patte avant droit',\r\n    '15-17': 'Patte arrière gauche',\r\n    '18-20': 'Patte arrière droite'\r\n  },\r\n  'FLYINGINSECT': {\r\n    \"1-2\": 'Tête',\r\n    \"3-8\": 'Torse',\r\n    '9-11': 'Aîle gauche',\r\n    '12-14': 'Aîle droite',\r\n    '15-20': 'Pattes',\r\n  },\r\n  'ROBOT': {\r\n    \"1-2\": 'Optique',\r\n    \"3-8\": 'Corps',\r\n    '9-11': 'Bras 1',\r\n    '12-14': 'Bras 2',\r\n    '15-17': 'Bras 3',\r\n    '18-20': 'Bras 4',\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {Dice, ExpressionNode} from \"dice-typescript\";\r\n\r\n@Component({\r\n  selector: 'app-combat-dice',\r\n  templateUrl: './combat-dice.component.html',\r\n  styleUrls: ['./combat-dice.component.scss'],\r\n})\r\nexport class CombatDiceComponent implements OnInit {\r\n\r\n  combatDiceCount = 1;\r\n  combatDiceChildren: ExpressionNode[] = [];\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {}\r\n\r\n  public rollCombat(): void {\r\n    const dice = new Dice();\r\n    const combatDiceResults = dice.roll(String(this.combatDiceCount) + 'd6');\r\n    this.combatDiceChildren = [];\r\n    combatDiceResults.reducedExpression.forEachChild(child => {\r\n      this.combatDiceChildren.push(child);\r\n    });\r\n  }\r\n\r\n}\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {Dice, DiceResult, ExpressionNode} from \"dice-typescript\";\r\n\r\n@Component({\r\n  selector: 'app-d20-dice',\r\n  templateUrl: './d20-dice.component.html',\r\n  styleUrls: ['./d20-dice.component.scss'],\r\n})\r\nexport class D20DiceComponent implements OnInit {\r\n\r\n  d20DiceCount = 2;\r\n  d20DiceResult: DiceResult | null;\r\n  d20DiceChildren: ExpressionNode[] = [];\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  public rollD20(): void {\r\n    const dice = new Dice();\r\n    this.d20DiceResult = dice.roll(String(this.d20DiceCount) + 'd20');\r\n    this.d20DiceChildren = [];\r\n    this.d20DiceResult.reducedExpression.forEachChild(child => {\r\n      this.d20DiceChildren.push(child);\r\n    });\r\n  }\r\n\r\n}\r\n","import {CUSTOM_ELEMENTS_SCHEMA, NgModule} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\nimport {FormsModule} from '@angular/forms';\r\nimport {IonicModule} from '@ionic/angular';\r\nimport {RouterModule} from '@angular/router';\r\n\r\nimport {DicesPages} from './dices.pages';\r\nimport {CombatDiceComponent} from \"./combat-dice/combat-dice.component\";\r\nimport {D20DiceComponent} from \"./d20-dice/d20-dice.component\";\r\nimport {DiceDetailsPipe} from \"../../pipes/dice-details.pipe\";\r\nimport {TargetDiceComponent} from \"./target-dice/target-dice.component\";\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild([\r\n      {\r\n        path: '',\r\n        component: DicesPages\r\n      }\r\n    ])\r\n  ],\r\n  declarations: [DicesPages, CombatDiceComponent, D20DiceComponent, DiceDetailsPipe, TargetDiceComponent],\r\n  exports: [DicesPages],\r\n  schemas: [CUSTOM_ELEMENTS_SCHEMA],\r\n})\r\nexport class DicesPageModule {\r\n}\r\n","import {Component} from '@angular/core';\r\nimport {NavController} from '@ionic/angular';\r\n\r\n@Component({\r\n  templateUrl: 'dices.page.html',\r\n  styleUrls: ['dices.page.scss'],\r\n})\r\nexport class DicesPages {\r\n\r\n  sections = [\r\n    {\r\n      label: \"Dès de combats\",\r\n      opened: true,\r\n      type: 'COMBATDICE'\r\n    },\r\n    {\r\n      'label': \"D20\",\r\n      'opened': false,\r\n      type: 'D20DICE'\r\n    },\r\n    {\r\n      'label': \"Localisation dégâts\",\r\n      'opened': false,\r\n      type: 'TARGETDICE'\r\n    }\r\n  ];\r\n\r\n  constructor(\r\n    public navCtrl: NavController) {\r\n  }\r\n\r\n  toggleGroup(section: any) {\r\n    section.opened = !section.opened;\r\n  }\r\n\r\n\r\n}\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {Dice, DiceResult} from \"dice-typescript\";\r\nimport {EnemyType, TARGET_TYPE_DATA} from \"../../../data/target-type-damage\";\r\n\r\n@Component({\r\n  selector: 'app-target-dice',\r\n  templateUrl: './target-dice.component.html',\r\n  styleUrls: ['./target-dice.component.scss'],\r\n})\r\nexport class TargetDiceComponent implements OnInit {\r\n\r\n  ennemyType: EnemyType = \"HUMAN\";\r\n  targetDiceResult: DiceResult | null;\r\n  target: string = '';\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  public rollTarget(): void {\r\n    const dice = new Dice();\r\n    this.targetDiceResult = dice.roll('1d20');\r\n    const targetDataType = TARGET_TYPE_DATA[this.ennemyType];\r\n    for (let key of Object.keys(targetDataType)) {\r\n      const min = Number(key.split('-')[0]);\r\n      const max = Number(key.split('-')[1]);\r\n      if (this.targetDiceResult.total >= min && this.targetDiceResult.total <= max) {\r\n        this.target = targetDataType[key];\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  segmentChanged($event: any) {\r\n    this.ennemyType = $event.detail.value;\r\n    this.targetDiceResult = null;\r\n  }\r\n}\r\n","import {Pipe, PipeTransform} from '@angular/core';\r\nimport {ExpressionNode} from \"dice-typescript\";\r\n\r\n@Pipe({\r\n  name: 'diceDetails'\r\n})\r\nexport class DiceDetailsPipe implements PipeTransform {\r\n\r\n  transform(diceChildren: ExpressionNode[]): string {\r\n    let output = '';\r\n    for (let i = 0; i < diceChildren.length; i++) {\r\n      output += diceChildren[i].getAttribute('value');\r\n      if (i < diceChildren.length - 1) {\r\n        output += ' + ';\r\n      }\r\n    }\r\n    return output;\r\n  }\r\n\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar factory_class_1 = require(\"./factory.class\");\r\nvar node_attributes_class_1 = require(\"./node-attributes.class\");\r\nvar ExpressionNode = /** @class */ (function () {\r\n    function ExpressionNode(type, parent) {\r\n        if (parent === void 0) { parent = null; }\r\n        this.type = type;\r\n        this.parent = parent;\r\n    }\r\n    ExpressionNode.prototype.copy = function () {\r\n        var _this = this;\r\n        var copy = factory_class_1.Factory.create(this.type);\r\n        if (this.attributes) {\r\n            Object.keys(this.attributes).forEach(function (attr) {\r\n                copy.setAttribute(attr, _this.attributes[attr]);\r\n            });\r\n        }\r\n        if (this.children) {\r\n            this.children.forEach(function (child) {\r\n                copy.addChild(child.copy());\r\n            });\r\n        }\r\n        return copy;\r\n    };\r\n    ExpressionNode.prototype.addChild = function (node) {\r\n        return this.insertChild(node);\r\n    };\r\n    ExpressionNode.prototype.insertChild = function (node, index) {\r\n        if (node) {\r\n            if (node === this) {\r\n                throw new Error('Cannot add a node as a child of itself.');\r\n            }\r\n            if (!this.children) {\r\n                this.children = [];\r\n            }\r\n            this.children.splice(index || this.children.length, 0, node);\r\n            node.parent = this;\r\n        }\r\n        return node;\r\n    };\r\n    ExpressionNode.prototype.clearChildren = function () {\r\n        this.children = undefined;\r\n    };\r\n    ExpressionNode.prototype.removeChild = function (expression) {\r\n        if (expression.parent !== this) {\r\n            return null;\r\n        }\r\n        this.children.splice(this.children.indexOf(expression, 1));\r\n        return expression;\r\n    };\r\n    ExpressionNode.prototype.getParent = function () {\r\n        return this.parent;\r\n    };\r\n    ExpressionNode.prototype.getChild = function (index) {\r\n        if (!this.children || this.children.length <= index) {\r\n            throw new Error(\"Child node at index \" + index + \" does not exist.\");\r\n        }\r\n        return this.children[index];\r\n    };\r\n    ExpressionNode.prototype.getChildCount = function () {\r\n        return this.children ? this.children.length : 0;\r\n    };\r\n    ExpressionNode.prototype.forEachChild = function (fn) {\r\n        var children = (this.children || []).slice();\r\n        children.forEach(fn);\r\n    };\r\n    ExpressionNode.prototype.getAttribute = function (key) {\r\n        return this.attributes ? this.attributes[key] : undefined;\r\n    };\r\n    ExpressionNode.prototype.setAttribute = function (key, value) {\r\n        if (!this.attributes) {\r\n            this.attributes = new node_attributes_class_1.NodeAttributes();\r\n        }\r\n        this.attributes[key] = value;\r\n        return this;\r\n    };\r\n    ExpressionNode.prototype.toJSON = function () {\r\n        var _this = this;\r\n        var keys = Object.keys(this).filter(function (k) { return k !== 'parent'; });\r\n        var obj = {};\r\n        keys.forEach(function (k) { return obj[k] = _this[k]; });\r\n        return obj;\r\n    };\r\n    return ExpressionNode;\r\n}());\r\nexports.ExpressionNode = ExpressionNode;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar expression_node_class_1 = require(\"./expression-node.class\");\r\nvar Factory = /** @class */ (function () {\r\n    function Factory() {\r\n    }\r\n    Factory.create = function (type) {\r\n        return new expression_node_class_1.ExpressionNode(type);\r\n    };\r\n    return Factory;\r\n}());\r\nexports.Factory = Factory;\r\n","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(require(\"./expression-node.class\"));\r\n__export(require(\"./factory.class\"));\r\n__export(require(\"./node-attributes.class\"));\r\n__export(require(\"./node-type.enum\"));\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar NodeAttributes = /** @class */ (function () {\r\n    function NodeAttributes() {\r\n    }\r\n    return NodeAttributes;\r\n}());\r\nexports.NodeAttributes = NodeAttributes;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar NodeType;\r\n(function (NodeType) {\r\n    NodeType[NodeType[\"Function\"] = 'Function'] = \"Function\";\r\n    NodeType[NodeType[\"Group\"] = 'Group'] = \"Group\";\r\n    NodeType[NodeType[\"Repeat\"] = 'Repeat'] = \"Repeat\";\r\n    NodeType[NodeType[\"Add\"] = 'Add'] = \"Add\";\r\n    NodeType[NodeType[\"Subtract\"] = 'Subtract'] = \"Subtract\";\r\n    NodeType[NodeType[\"Negate\"] = 'Negate'] = \"Negate\";\r\n    NodeType[NodeType[\"Exponent\"] = 'Exponent'] = \"Exponent\";\r\n    NodeType[NodeType[\"Multiply\"] = 'Multiply'] = \"Multiply\";\r\n    NodeType[NodeType[\"Divide\"] = 'Divide'] = \"Divide\";\r\n    NodeType[NodeType[\"Modulo\"] = 'Modulo'] = \"Modulo\";\r\n    NodeType[NodeType[\"Equal\"] = 'Equal'] = \"Equal\";\r\n    NodeType[NodeType[\"Greater\"] = 'Greater'] = \"Greater\";\r\n    NodeType[NodeType[\"GreaterOrEqual\"] = 'GreaterOrEqual'] = \"GreaterOrEqual\";\r\n    NodeType[NodeType[\"Less\"] = 'Less'] = \"Less\";\r\n    NodeType[NodeType[\"LessOrEqual\"] = 'LessOrEqual'] = \"LessOrEqual\";\r\n    NodeType[NodeType[\"Explode\"] = 'Explode'] = \"Explode\";\r\n    NodeType[NodeType[\"Keep\"] = 'Keep'] = \"Keep\";\r\n    NodeType[NodeType[\"Drop\"] = 'Drop'] = \"Drop\";\r\n    NodeType[NodeType[\"Critical\"] = 'Critical'] = \"Critical\";\r\n    NodeType[NodeType[\"Reroll\"] = 'Reroll'] = \"Reroll\";\r\n    NodeType[NodeType[\"Sort\"] = 'Sort'] = \"Sort\";\r\n    NodeType[NodeType[\"Dice\"] = 'Dice'] = \"Dice\";\r\n    NodeType[NodeType[\"DiceSides\"] = 'DiceSides'] = \"DiceSides\";\r\n    NodeType[NodeType[\"DiceRoll\"] = 'DiceRoll'] = \"DiceRoll\";\r\n    NodeType[NodeType[\"Number\"] = 'Number'] = \"Number\";\r\n})(NodeType = exports.NodeType || (exports.NodeType = {}));\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar generator_1 = require(\"./generator\");\r\nvar dice_interpreter_class_1 = require(\"./interpreter/dice-interpreter.class\");\r\nvar dice_lexer_class_1 = require(\"./lexer/dice-lexer.class\");\r\nvar dice_parser_class_1 = require(\"./parser/dice-parser.class\");\r\nvar Dice = /** @class */ (function () {\r\n    function Dice(functions, randomProvider, options) {\r\n        this.functions = functions;\r\n        this.randomProvider = randomProvider;\r\n        this.options = options;\r\n    }\r\n    Dice.prototype.roll = function (input) {\r\n        var lexer = this.createLexer(input);\r\n        var parser = this.createParser(lexer);\r\n        var interpreter = this.createInterpreter();\r\n        var parseResult = parser.parse();\r\n        return interpreter.interpret(parseResult.root);\r\n    };\r\n    Dice.prototype.createLexer = function (input) {\r\n        return new dice_lexer_class_1.DiceLexer(input);\r\n    };\r\n    Dice.prototype.createParser = function (lexer) {\r\n        return new dice_parser_class_1.DiceParser(lexer);\r\n    };\r\n    Dice.prototype.createInterpreter = function () {\r\n        return new dice_interpreter_class_1.DiceInterpreter(this.functions, this.randomProvider, this.createGenerator(), this.options);\r\n    };\r\n    Dice.prototype.createGenerator = function () {\r\n        return new generator_1.DiceGenerator();\r\n    };\r\n    return Dice;\r\n}());\r\nexports.Dice = Dice;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Ast = require(\"../ast\");\r\nvar DiceGenerator = /** @class */ (function () {\r\n    function DiceGenerator() {\r\n    }\r\n    DiceGenerator.prototype.generate = function (expression) {\r\n        switch (expression.type) {\r\n            case Ast.NodeType.Number: return this.generateNumber(expression);\r\n            case Ast.NodeType.Add: return this.generateAdd(expression);\r\n            case Ast.NodeType.Subtract: return this.generateSubtract(expression);\r\n            case Ast.NodeType.Multiply: return this.generateMultiply(expression);\r\n            case Ast.NodeType.Divide: return this.generateDivide(expression);\r\n            case Ast.NodeType.Modulo: return this.generateModulo(expression);\r\n            case Ast.NodeType.Exponent: return this.generateExponent(expression);\r\n            case Ast.NodeType.Negate: return this.generateNegate(expression);\r\n            case Ast.NodeType.Dice: return this.generateDice(expression);\r\n            case Ast.NodeType.DiceSides: return this.generateDiceSides(expression);\r\n            case Ast.NodeType.DiceRoll: return this.generateDiceRoll(expression);\r\n            case Ast.NodeType.Function: return this.generateFunction(expression);\r\n            case Ast.NodeType.Group: return this.generateGroup(expression);\r\n            case Ast.NodeType.Repeat: return this.generateRepeat(expression);\r\n            case Ast.NodeType.Equal: return this.generateEqual(expression);\r\n            case Ast.NodeType.Greater: return this.generateGreater(expression);\r\n            case Ast.NodeType.GreaterOrEqual: return this.generateGreaterOrEqual(expression);\r\n            case Ast.NodeType.Less: return this.generateLess(expression);\r\n            case Ast.NodeType.LessOrEqual: return this.generateLessOrEqual(expression);\r\n            case Ast.NodeType.Explode: return this.generateExplode(expression);\r\n            case Ast.NodeType.Keep: return this.generateKeep(expression);\r\n            case Ast.NodeType.Drop: return this.generateDrop(expression);\r\n            case Ast.NodeType.Critical: return this.generateCritical(expression);\r\n            case Ast.NodeType.Reroll: return this.generateReroll(expression);\r\n            case Ast.NodeType.Sort: return this.generateSort(expression);\r\n            default: throw new Error('Unrecognized node type.');\r\n        }\r\n    };\r\n    DiceGenerator.prototype.generateNumber = function (expression) {\r\n        return expression.getAttribute('value').toString();\r\n    };\r\n    DiceGenerator.prototype.generateAdd = function (expression) {\r\n        this.expectChildCount(expression, 2);\r\n        return this.generate(expression.getChild(0)) + ' + ' + this.generate(expression.getChild(1));\r\n    };\r\n    DiceGenerator.prototype.generateSubtract = function (expression) {\r\n        this.expectChildCount(expression, 2);\r\n        return this.generate(expression.getChild(0)) + ' - ' + this.generate(expression.getChild(1));\r\n    };\r\n    DiceGenerator.prototype.generateMultiply = function (expression) {\r\n        this.expectChildCount(expression, 2);\r\n        return this.generate(expression.getChild(0)) + ' * ' + this.generate(expression.getChild(1));\r\n    };\r\n    DiceGenerator.prototype.generateDivide = function (expression) {\r\n        this.expectChildCount(expression, 2);\r\n        return this.generate(expression.getChild(0)) + ' / ' + this.generate(expression.getChild(1));\r\n    };\r\n    DiceGenerator.prototype.generateModulo = function (expression) {\r\n        this.expectChildCount(expression, 2);\r\n        return this.generate(expression.getChild(0)) + ' % ' + this.generate(expression.getChild(1));\r\n    };\r\n    DiceGenerator.prototype.generateExponent = function (expression) {\r\n        this.expectChildCount(expression, 2);\r\n        return this.generate(expression.getChild(0)) + ' ^ ' + this.generate(expression.getChild(1));\r\n    };\r\n    DiceGenerator.prototype.generateNegate = function (expression) {\r\n        this.expectChildCount(expression, 1);\r\n        return '-' + this.generate(expression.getChild(0));\r\n    };\r\n    DiceGenerator.prototype.generateDice = function (expression) {\r\n        if (expression.getChildCount() === 0 || expression.getChild(0).type === Ast.NodeType.DiceRoll) {\r\n            return '[' + this.generateCommaList(expression) + ']';\r\n        }\r\n        else {\r\n            this.expectChildCount(expression, 2);\r\n            return this.generateWithParens(expression.getChild(0)) + 'd' + this.generateWithParens(expression.getChild(1));\r\n        }\r\n    };\r\n    DiceGenerator.prototype.generateDiceSides = function (expression) {\r\n        var val = expression.getAttribute('value').toString();\r\n        return val === 'fate' ? 'F' : val;\r\n    };\r\n    DiceGenerator.prototype.generateDiceRoll = function (expression) {\r\n        return expression.getAttribute('value').toString();\r\n    };\r\n    DiceGenerator.prototype.generateFunction = function (expression) {\r\n        return expression.getAttribute('name') + '(' + this.generateCommaList(expression) + ')';\r\n    };\r\n    DiceGenerator.prototype.generateGroup = function (expression) {\r\n        return '{' + this.generateCommaList(expression) + '}';\r\n    };\r\n    DiceGenerator.prototype.generateRepeat = function (expression) {\r\n        this.expectChildCount(expression, 2);\r\n        return this.generate(expression.getChild(0)) + '...' + this.generate(expression.getChild(1));\r\n    };\r\n    DiceGenerator.prototype.generateEqual = function (expression) {\r\n        return this.generateEqualityExpression(expression, '=');\r\n    };\r\n    DiceGenerator.prototype.generateGreater = function (expression) {\r\n        return this.generateEqualityExpression(expression, '>');\r\n    };\r\n    DiceGenerator.prototype.generateGreaterOrEqual = function (expression) {\r\n        return this.generateEqualityExpression(expression, '>=');\r\n    };\r\n    DiceGenerator.prototype.generateLess = function (expression) {\r\n        return this.generateEqualityExpression(expression, '<');\r\n    };\r\n    DiceGenerator.prototype.generateLessOrEqual = function (expression) {\r\n        return this.generateEqualityExpression(expression, '<=');\r\n    };\r\n    DiceGenerator.prototype.generateExplode = function (expression) {\r\n        this.expectChildCount(expression, 1);\r\n        var exp = '!';\r\n        if (expression.getAttribute('compound')) {\r\n            exp += '!';\r\n        }\r\n        if (expression.getAttribute('penetrate')) {\r\n            exp += 'p';\r\n        }\r\n        if (expression.getChildCount() > 1) {\r\n            exp += this.generate(expression.getChild(1));\r\n        }\r\n        return this.generate(expression.getChild(0)) + exp;\r\n    };\r\n    DiceGenerator.prototype.generateKeep = function (expression) {\r\n        this.expectChildCount(expression, 1);\r\n        var exp = 'k';\r\n        if (expression.getAttribute('type') === 'highest') {\r\n            exp += 'h';\r\n        }\r\n        if (expression.getAttribute('type') === 'lowest') {\r\n            exp += 'l';\r\n        }\r\n        if (expression.getChildCount() > 1) {\r\n            exp += this.generate(expression.getChild(1));\r\n        }\r\n        return this.generate(expression.getChild(0)) + exp;\r\n    };\r\n    DiceGenerator.prototype.generateDrop = function (expression) {\r\n        this.expectChildCount(expression, 1);\r\n        var exp = 'd';\r\n        if (expression.getAttribute('type') === 'highest') {\r\n            exp += 'h';\r\n        }\r\n        if (expression.getAttribute('type') === 'lowest') {\r\n            exp += 'l';\r\n        }\r\n        if (expression.getChildCount() > 1) {\r\n            exp += this.generate(expression.getChild(1));\r\n        }\r\n        return this.generate(expression.getChild(0)) + exp;\r\n    };\r\n    DiceGenerator.prototype.generateCritical = function (expression) {\r\n        this.expectChildCount(expression, 1);\r\n        var critical = 'c';\r\n        if (expression.getAttribute('type') === 'success') {\r\n            critical += 's';\r\n        }\r\n        if (expression.getAttribute('type') === 'failure') {\r\n            critical += 'f';\r\n        }\r\n        if (expression.getChildCount() > 1) {\r\n            critical += this.generate(expression.getChild(1));\r\n        }\r\n        return this.generate(expression.getChild(0)) + critical;\r\n    };\r\n    DiceGenerator.prototype.generateReroll = function (expression) {\r\n        this.expectChildCount(expression, 1);\r\n        var reroll = 'r';\r\n        if (expression.getAttribute('once')) {\r\n            reroll += 'o';\r\n        }\r\n        if (expression.getChildCount() > 1) {\r\n            reroll += this.generate(expression.getChild(1));\r\n        }\r\n        return this.generate(expression.getChild(0)) + reroll;\r\n    };\r\n    DiceGenerator.prototype.generateSort = function (expression) {\r\n        this.expectChildCount(expression, 1);\r\n        var sort = 's';\r\n        if (expression.getAttribute('direction') === 'ascending') {\r\n            sort += 'a';\r\n        }\r\n        if (expression.getAttribute('direction') === 'descending') {\r\n            sort += 'd';\r\n        }\r\n        return this.generate(expression.getChild(0)) + sort;\r\n    };\r\n    DiceGenerator.prototype.generateEqualityExpression = function (expression, operator) {\r\n        this.expectChildCount(expression, 1);\r\n        if (expression.getChildCount() === 1) {\r\n            return operator + this.generate(expression.getChild(0));\r\n        }\r\n        else {\r\n            return this.generate(expression.getChild(0)) + ' ' + operator + ' ' + this.generate(expression.getChild(1));\r\n        }\r\n    };\r\n    DiceGenerator.prototype.generateCommaList = function (expression) {\r\n        var buffer = '';\r\n        for (var x = 0; x < expression.getChildCount(); x++) {\r\n            if (x > 0) {\r\n                buffer += ', ';\r\n            }\r\n            buffer += this.generate(expression.getChild(x));\r\n        }\r\n        return buffer;\r\n    };\r\n    DiceGenerator.prototype.generateWithParens = function (expression) {\r\n        if (expression.getChildCount() === 0) {\r\n            return this.generate(expression);\r\n        }\r\n        else {\r\n            return '(' + this.generate(expression) + ')';\r\n        }\r\n    };\r\n    DiceGenerator.prototype.expectChildCount = function (expression, count) {\r\n        var findCount = expression.getChildCount();\r\n        if (findCount < count) {\r\n            throw new Error(\"Expected \" + expression.type + \" node to have \" + count + \" children, but found \" + findCount + \".\");\r\n        }\r\n    };\r\n    return DiceGenerator;\r\n}());\r\nexports.DiceGenerator = DiceGenerator;\r\n","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(require(\"./dice-generator.class\"));\r\n","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(require(\"./ast\"));\r\n__export(require(\"./random\"));\r\n__export(require(\"./generator\"));\r\n__export(require(\"./interpreter\"));\r\n__export(require(\"./parser\"));\r\n__export(require(\"./dice.class\"));\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar function_definition_list_class_1 = require(\"./function-definition-list.class\");\r\nexports.DefaultFunctionDefinitions = new function_definition_list_class_1.FunctionDefinitionList();\r\nexports.DefaultFunctionDefinitions['floor'] = function (interpreter, functionNode, errors) {\r\n    return Math.floor(interpreter.evaluate(functionNode.getChild(0), errors));\r\n};\r\nexports.DefaultFunctionDefinitions['ceil'] = function (interpreter, functionNode, errors) {\r\n    return Math.ceil(interpreter.evaluate(functionNode.getChild(0), errors));\r\n};\r\nexports.DefaultFunctionDefinitions['abs'] = function (interpreter, functionNode, errors) {\r\n    return Math.abs(interpreter.evaluate(functionNode.getChild(0), errors));\r\n};\r\nexports.DefaultFunctionDefinitions['round'] = function (interpreter, functionNode, errors) {\r\n    return Math.round(interpreter.evaluate(functionNode.getChild(0), errors));\r\n};\r\nexports.DefaultFunctionDefinitions['sqrt'] = function (interpreter, functionNode, errors) {\r\n    return Math.sqrt(interpreter.evaluate(functionNode.getChild(0), errors));\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Ast = require(\"../ast\");\r\nvar generator_1 = require(\"../generator\");\r\nvar random_1 = require(\"../random\");\r\nvar default_function_definitions_1 = require(\"./default-function-definitions\");\r\nvar dice_result_class_1 = require(\"./dice-result.class\");\r\nvar error_message_class_1 = require(\"./error-message.class\");\r\nvar DiceInterpreter = /** @class */ (function () {\r\n    function DiceInterpreter(functions, random, generator, options) {\r\n        this.functions = default_function_definitions_1.DefaultFunctionDefinitions;\r\n        Object.assign(this.functions, functions);\r\n        this.random = random || new random_1.DefaultRandomProvider();\r\n        this.generator = generator || new generator_1.DiceGenerator();\r\n        this.options = options || {};\r\n    }\r\n    DiceInterpreter.prototype.interpret = function (expression) {\r\n        var exp = expression.copy();\r\n        var errors = [];\r\n        var total = this.evaluate(exp, errors);\r\n        var successes = this.countSuccesses(exp, errors);\r\n        var fails = this.countFailures(exp, errors);\r\n        var renderedExpression = this.generator.generate(exp);\r\n        return new dice_result_class_1.DiceResult(exp, renderedExpression, total, successes, fails, errors);\r\n    };\r\n    DiceInterpreter.prototype.evaluate = function (expression, errors) {\r\n        if (!expression) {\r\n            errors.push(new error_message_class_1.InterpreterError('Unexpected null node reference found.', expression));\r\n            return 0;\r\n        }\r\n        if (expression.type === Ast.NodeType.DiceRoll) {\r\n            return this.evaluateDiceRoll(expression, errors);\r\n        }\r\n        else if (expression.type === Ast.NodeType.Number) {\r\n            return this.evaluateNumber(expression, errors);\r\n        }\r\n        else if (expression.type === Ast.NodeType.DiceSides) {\r\n            return this.evaluateDiceSides(expression, errors);\r\n        }\r\n        else if (!expression.getAttribute('value')) {\r\n            var value = 0;\r\n            switch (expression.type) {\r\n                case Ast.NodeType.Add:\r\n                    value = this.evaluateAdd(expression, errors);\r\n                    break;\r\n                case Ast.NodeType.Subtract:\r\n                    value = this.evaluateSubtract(expression, errors);\r\n                    break;\r\n                case Ast.NodeType.Multiply:\r\n                    value = this.evaluateMultiply(expression, errors);\r\n                    break;\r\n                case Ast.NodeType.Divide:\r\n                    value = this.evaluateDivide(expression, errors);\r\n                    break;\r\n                case Ast.NodeType.Modulo:\r\n                    value = this.evaluateModulo(expression, errors);\r\n                    break;\r\n                case Ast.NodeType.Negate:\r\n                    value = this.evaluateNegate(expression, errors);\r\n                    break;\r\n                case Ast.NodeType.Exponent:\r\n                    value = this.evaluateExponent(expression, errors);\r\n                    break;\r\n                case Ast.NodeType.Dice:\r\n                    value = this.evaluateDice(expression, errors);\r\n                    break;\r\n                case Ast.NodeType.Function:\r\n                    value = this.evaluateFunction(expression, errors);\r\n                    break;\r\n                case Ast.NodeType.Group:\r\n                    value = this.evaluateGroup(expression, errors);\r\n                    break;\r\n                case Ast.NodeType.Repeat:\r\n                    value = this.evaluateRepeat(expression, errors);\r\n                    break;\r\n                case Ast.NodeType.Explode:\r\n                    value = this.evaluateExplode(expression, errors);\r\n                    break;\r\n                case Ast.NodeType.Keep:\r\n                    value = this.evaluateKeep(expression, errors);\r\n                    break;\r\n                case Ast.NodeType.Drop:\r\n                    value = this.evaluateDrop(expression, errors);\r\n                    break;\r\n                case Ast.NodeType.Critical:\r\n                    value = this.evaluateCritical(expression, errors);\r\n                    break;\r\n                case Ast.NodeType.Reroll:\r\n                    value = this.evaluateReroll(expression, errors);\r\n                    break;\r\n                case Ast.NodeType.Sort:\r\n                    value = this.evaluateSort(expression, errors);\r\n                    break;\r\n                case Ast.NodeType.Equal:\r\n                    value = this.evaluateEqual(expression, errors);\r\n                    break;\r\n                case Ast.NodeType.Greater:\r\n                    value = this.evaluateGreater(expression, errors);\r\n                    break;\r\n                case Ast.NodeType.GreaterOrEqual:\r\n                    value = this.evaluateGreaterOrEqual(expression, errors);\r\n                    break;\r\n                case Ast.NodeType.Less:\r\n                    value = this.evaluateLess(expression, errors);\r\n                    break;\r\n                case Ast.NodeType.LessOrEqual:\r\n                    value = this.evaluateLessOrEqual(expression, errors);\r\n                    break;\r\n                default:\r\n                    errors.push(new error_message_class_1.InterpreterError(\"Unrecognized node type '\" + expression.type + \"'.\", expression));\r\n                    return 0;\r\n            }\r\n            expression.setAttribute('value', value);\r\n        }\r\n        return expression.getAttribute('value');\r\n    };\r\n    DiceInterpreter.prototype.evaluateAdd = function (expression, errors) {\r\n        if (!this.expectChildCount(expression, 2, errors)) {\r\n            return 0;\r\n        }\r\n        return this.evaluate(expression.getChild(0), errors) + this.evaluate(expression.getChild(1), errors);\r\n    };\r\n    DiceInterpreter.prototype.evaluateSubtract = function (expression, errors) {\r\n        if (!this.expectChildCount(expression, 2, errors)) {\r\n            return 0;\r\n        }\r\n        return this.evaluate(expression.getChild(0), errors) - this.evaluate(expression.getChild(1), errors);\r\n    };\r\n    DiceInterpreter.prototype.evaluateMultiply = function (expression, errors) {\r\n        if (!this.expectChildCount(expression, 2, errors)) {\r\n            return 0;\r\n        }\r\n        return this.evaluate(expression.getChild(0), errors) * this.evaluate(expression.getChild(1), errors);\r\n    };\r\n    DiceInterpreter.prototype.evaluateDivide = function (expression, errors) {\r\n        if (!this.expectChildCount(expression, 2, errors)) {\r\n            return 0;\r\n        }\r\n        return this.evaluate(expression.getChild(0), errors) / this.evaluate(expression.getChild(1), errors);\r\n    };\r\n    DiceInterpreter.prototype.evaluateModulo = function (expression, errors) {\r\n        if (!this.expectChildCount(expression, 2, errors)) {\r\n            return 0;\r\n        }\r\n        return this.evaluate(expression.getChild(0), errors) % this.evaluate(expression.getChild(1), errors);\r\n    };\r\n    DiceInterpreter.prototype.evaluateExponent = function (expression, errors) {\r\n        if (!this.expectChildCount(expression, 2, errors)) {\r\n            return 0;\r\n        }\r\n        return Math.pow(this.evaluate(expression.getChild(0), errors), this.evaluate(expression.getChild(1), errors));\r\n    };\r\n    DiceInterpreter.prototype.evaluateNegate = function (expression, errors) {\r\n        if (!this.expectChildCount(expression, 1, errors)) {\r\n            return 0;\r\n        }\r\n        return -this.evaluate(expression.getChild(0), errors);\r\n    };\r\n    DiceInterpreter.prototype.evaluateNumber = function (expression, errors) {\r\n        return expression.getAttribute('value');\r\n    };\r\n    DiceInterpreter.prototype.evaluateDiceSides = function (expression, errors) {\r\n        return expression.getAttribute('value');\r\n    };\r\n    DiceInterpreter.prototype.evaluateDiceRoll = function (expression, errors) {\r\n        if (expression.getAttribute('drop') !== true) {\r\n            return expression.getAttribute('value');\r\n        }\r\n        return 0;\r\n    };\r\n    DiceInterpreter.prototype.evaluateDice = function (expression, errors) {\r\n        if (!this.expectChildCount(expression, 2, errors)) {\r\n            return 0;\r\n        }\r\n        var num = Math.round(this.evaluate(expression.getChild(0), errors));\r\n        var _a = this.options, maxRollTimes = _a.maxRollTimes, maxDiceSides = _a.maxDiceSides;\r\n        if (maxRollTimes && num > maxRollTimes) {\r\n            errors.push(new error_message_class_1.InterpreterError(\"Invalid number of rolls: \" + num + \". Maximum allowed: \" + maxRollTimes + \".\", expression));\r\n            return null;\r\n        }\r\n        var sides = expression.getChild(1);\r\n        var sidesValue = this.evaluate(sides, errors);\r\n        if (maxDiceSides && sidesValue > maxDiceSides) {\r\n            errors.push(new error_message_class_1.InterpreterError(\"Invalid number of dice sides: \" + sidesValue + \". Maximum allowed: \" + maxDiceSides + \".\", expression));\r\n            return null;\r\n        }\r\n        expression.setAttribute('sides', sidesValue);\r\n        expression.clearChildren();\r\n        var total = 0;\r\n        for (var x = 0; x < num; x++) {\r\n            var diceRoll = this.createDiceRoll(sides, errors);\r\n            expression.addChild(diceRoll);\r\n            total += this.evaluate(diceRoll, errors);\r\n        }\r\n        return total;\r\n    };\r\n    DiceInterpreter.prototype.evaluateFunction = function (expression, errors) {\r\n        var fName = expression.getAttribute('name');\r\n        if (Object.keys(this.functions).indexOf(fName) === -1) {\r\n            errors.push(new error_message_class_1.InterpreterError(\"Unknown function: \" + fName, expression));\r\n            return 0;\r\n        }\r\n        var result = this.functions[fName](this, expression, errors);\r\n        return result;\r\n    };\r\n    DiceInterpreter.prototype.evaluateGroup = function (expression, errors) {\r\n        var _this = this;\r\n        var total = 0;\r\n        expression.forEachChild(function (child) {\r\n            total += _this.evaluate(child, errors);\r\n        });\r\n        return total;\r\n    };\r\n    DiceInterpreter.prototype.evaluateRepeat = function (expression, errors) {\r\n        if (!this.expectChildCount(expression, 2, errors)) {\r\n            return 0;\r\n        }\r\n        var lhs = expression.getChild(0);\r\n        var times = this.evaluate(expression.getChild(1), errors);\r\n        var parent = expression.getParent();\r\n        parent.removeChild(expression);\r\n        var total = 0;\r\n        for (var x = 0; x < times; x++) {\r\n            var copy = lhs.copy();\r\n            parent.addChild(copy);\r\n            total += this.evaluate(copy, errors);\r\n        }\r\n        return total;\r\n    };\r\n    DiceInterpreter.prototype.evaluateExplode = function (expression, errors) {\r\n        var _this = this;\r\n        if (!this.expectChildCount(expression, 1, errors)) {\r\n            return 0;\r\n        }\r\n        var dice = this.findDiceOrGroupNode(expression, errors);\r\n        if (!dice) {\r\n            return 0;\r\n        }\r\n        var penetrate = expression.getAttribute('penetrate');\r\n        var sides = dice.getAttribute('sides');\r\n        var condition;\r\n        if (expression.getChildCount() > 1) {\r\n            condition = expression.getChild(1);\r\n            if (this.wouldRollAgainForever(dice, condition, errors)) {\r\n                return 0;\r\n            }\r\n        }\r\n        else {\r\n            condition = Ast.Factory.create(Ast.NodeType.Equal);\r\n            condition.addChild(Ast.Factory.create(Ast.NodeType.Number).setAttribute('value', sides));\r\n        }\r\n        this.evaluate(dice, errors);\r\n        var newRolls = [];\r\n        var total = 0;\r\n        dice.forEachChild(function (die) {\r\n            if (!die.getAttribute('drop')) {\r\n                var dieValue = _this.evaluate(die, errors);\r\n                total += dieValue;\r\n                while (condition && _this.evaluateComparison(dieValue, condition, errors)) {\r\n                    die = _this.createDiceRoll(sides, errors);\r\n                    dieValue = _this.evaluate(die, errors);\r\n                    if (penetrate) {\r\n                        dieValue -= 1;\r\n                    }\r\n                    total += dieValue;\r\n                    newRolls.push(die);\r\n                }\r\n            }\r\n        });\r\n        newRolls.forEach(function (newRoll) { return dice.addChild(newRoll); });\r\n        return total;\r\n    };\r\n    DiceInterpreter.prototype.evaluateKeep = function (expression, errors) {\r\n        if (!this.expectChildCount(expression, 1, errors)) {\r\n            return 0;\r\n        }\r\n        var dice = this.findDiceOrGroupNode(expression, errors);\r\n        if (!dice) {\r\n            return 0;\r\n        }\r\n        var countTotal = (expression.getChildCount() > 1) ? this.evaluate(expression.getChild(1), errors) : 1;\r\n        var type = expression.getAttribute('type');\r\n        this.evaluate(dice, errors);\r\n        var rolls = this.getSortedDiceRolls(dice, (type === 'lowest') ? 'ascending' : 'descending', errors).rolls;\r\n        var count = 0;\r\n        var total = 0;\r\n        rolls.forEach(function (roll) {\r\n            if (count < countTotal) {\r\n                roll.setAttribute('drop', false);\r\n                total += roll.getAttribute('value');\r\n            }\r\n            else {\r\n                roll.setAttribute('drop', true);\r\n            }\r\n            count++;\r\n        });\r\n        return total;\r\n    };\r\n    DiceInterpreter.prototype.evaluateDrop = function (expression, errors) {\r\n        if (!this.expectChildCount(expression, 1, errors)) {\r\n            return 0;\r\n        }\r\n        var dice = this.findDiceOrGroupNode(expression, errors);\r\n        if (!dice) {\r\n            return 0;\r\n        }\r\n        var countTotal = (expression.getChildCount() > 1) ? this.evaluate(expression.getChild(1), errors) : 1;\r\n        var type = expression.getAttribute('type');\r\n        this.evaluate(dice, errors);\r\n        var rolls = this.getSortedDiceRolls(dice, (type === 'lowest') ? 'ascending' : 'descending', errors).rolls;\r\n        var count = 0;\r\n        var total = 0;\r\n        rolls.forEach(function (roll) {\r\n            if (count < countTotal) {\r\n                roll.setAttribute('drop', true);\r\n            }\r\n            else {\r\n                roll.setAttribute('drop', false);\r\n                total += roll.getAttribute('value');\r\n            }\r\n            count++;\r\n        });\r\n        return total;\r\n    };\r\n    DiceInterpreter.prototype.evaluateCritical = function (expression, errors) {\r\n        var _this = this;\r\n        if (!this.expectChildCount(expression, 1, errors)) {\r\n            return 0;\r\n        }\r\n        var dice = this.findDiceOrGroupNode(expression, errors);\r\n        if (!dice) {\r\n            return 0;\r\n        }\r\n        var type = expression.getAttribute('type');\r\n        var condition;\r\n        if (expression.getChildCount() > 1) {\r\n            condition = expression.getChild(1);\r\n        }\r\n        else {\r\n            condition = Ast.Factory.create(Ast.NodeType.Equal);\r\n            if (type === 'success') {\r\n                this.expectChildCount(dice, 2, errors);\r\n                condition.addChild(Ast.Factory.create(Ast.NodeType.Number).setAttribute('value', dice.getAttribute('sides')));\r\n            }\r\n            else {\r\n                condition.addChild(Ast.Factory.create(Ast.NodeType.Number).setAttribute('value', 1));\r\n            }\r\n        }\r\n        this.evaluate(dice, errors);\r\n        var total = 0;\r\n        dice.forEachChild(function (die) {\r\n            var dieValue = _this.evaluate(die, errors);\r\n            if (_this.evaluateComparison(dieValue, condition, errors)) {\r\n                die.setAttribute('critical', type);\r\n                total += dieValue;\r\n            }\r\n        });\r\n        return total;\r\n    };\r\n    DiceInterpreter.prototype.evaluateReroll = function (expression, errors) {\r\n        var _this = this;\r\n        if (!this.expectChildCount(expression, 1, errors)) {\r\n            return 0;\r\n        }\r\n        var dice = this.findDiceOrGroupNode(expression, errors);\r\n        if (!dice) {\r\n            return 0;\r\n        }\r\n        var condition;\r\n        var once = expression.getAttribute('once');\r\n        if (expression.getChildCount() > 1) {\r\n            condition = expression.getChild(1);\r\n            if (this.wouldRollAgainForever(dice, condition, errors)) {\r\n                return 0;\r\n            }\r\n        }\r\n        else {\r\n            condition = Ast.Factory.create(Ast.NodeType.Equal);\r\n            condition.addChild(Ast.Factory.create(Ast.NodeType.Number).setAttribute('value', 1));\r\n        }\r\n        this.evaluate(dice, errors);\r\n        var total = 0;\r\n        var sides = dice.getAttribute('sides');\r\n        dice.forEachChild(function (die) {\r\n            if (!die.getAttribute('drop')) {\r\n                var dieValue = _this.evaluate(die, errors);\r\n                while (condition && _this.evaluateComparison(dieValue, condition, errors)) {\r\n                    dieValue = _this.createDiceRollValue(sides, errors);\r\n                    if (once) {\r\n                        break;\r\n                    }\r\n                }\r\n                die.setAttribute('value', dieValue);\r\n                total += dieValue;\r\n            }\r\n        });\r\n        return total;\r\n    };\r\n    DiceInterpreter.prototype.evaluateSort = function (expression, errors) {\r\n        if (!this.expectChildCount(expression, 1, errors)) {\r\n            return 0;\r\n        }\r\n        var dice = this.findDiceOrGroupNode(expression, errors);\r\n        if (!dice) {\r\n            return 0;\r\n        }\r\n        var rolls = this.getSortedDiceRolls(dice, expression.getAttribute('direction'), errors);\r\n        dice.clearChildren();\r\n        rolls.rolls.forEach(function (roll) { return dice.addChild(roll); });\r\n        return rolls.total;\r\n    };\r\n    DiceInterpreter.prototype.evaluateEqual = function (expression, errors) {\r\n        return this.evaluateSuccess(expression, function (l, r) { return (l === r); }, errors);\r\n    };\r\n    DiceInterpreter.prototype.evaluateGreater = function (expression, errors) {\r\n        return this.evaluateSuccess(expression, function (l, r) { return (l > r); }, errors);\r\n    };\r\n    DiceInterpreter.prototype.evaluateGreaterOrEqual = function (expression, errors) {\r\n        return this.evaluateSuccess(expression, function (l, r) { return (l >= r); }, errors);\r\n    };\r\n    DiceInterpreter.prototype.evaluateLess = function (expression, errors) {\r\n        return this.evaluateSuccess(expression, function (l, r) { return (l < r); }, errors);\r\n    };\r\n    DiceInterpreter.prototype.evaluateLessOrEqual = function (expression, errors) {\r\n        return this.evaluateSuccess(expression, function (l, r) { return (l <= r); }, errors);\r\n    };\r\n    DiceInterpreter.prototype.countSuccesses = function (expression, errors) {\r\n        return this.countSuccessOrFailure(expression, function (die) { return die.getAttribute('success'); }, errors);\r\n    };\r\n    DiceInterpreter.prototype.countFailures = function (expression, errors) {\r\n        return this.countSuccessOrFailure(expression, function (die) { return !die.getAttribute('success'); }, errors);\r\n    };\r\n    DiceInterpreter.prototype.countSuccessOrFailure = function (expression, condition, errors) {\r\n        var _this = this;\r\n        var total = 0;\r\n        if (expression.type === Ast.NodeType.Dice || expression.type === Ast.NodeType.Group) {\r\n            expression.forEachChild(function (die) {\r\n                if (!die.getAttribute('drop') && condition(die)) {\r\n                    total++;\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            expression.forEachChild(function (die) {\r\n                total += _this.countSuccessOrFailure(die, condition, errors);\r\n            });\r\n        }\r\n        return total;\r\n    };\r\n    DiceInterpreter.prototype.expectChildCount = function (expression, count, errors) {\r\n        var findCount = expression.getChildCount();\r\n        if (findCount < count) {\r\n            var err = new error_message_class_1.InterpreterError(\"Expected \" + expression.type + \" node to have \" + count + \" children, but found \" + findCount + \".\", expression);\r\n            errors.push(err);\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    DiceInterpreter.prototype.evaluateComparison = function (lhs, expression, errors) {\r\n        if (!this.expectChildCount(expression, 1, errors)) {\r\n            return false;\r\n        }\r\n        switch (expression.type) {\r\n            case Ast.NodeType.Equal: return lhs === this.evaluate(expression.getChild(0), errors);\r\n            case Ast.NodeType.Greater: return lhs > this.evaluate(expression.getChild(0), errors);\r\n            case Ast.NodeType.GreaterOrEqual: return lhs >= this.evaluate(expression.getChild(0), errors);\r\n            case Ast.NodeType.Less: return lhs < this.evaluate(expression.getChild(0), errors);\r\n            case Ast.NodeType.LessOrEqual: return lhs <= this.evaluate(expression.getChild(0), errors);\r\n            default:\r\n                errors.push(new error_message_class_1.InterpreterError(\"Unrecognized comparison operator '\" + expression.type + \"'.\", expression));\r\n                return false;\r\n        }\r\n    };\r\n    DiceInterpreter.prototype.evaluateSuccess = function (expression, compare, errors) {\r\n        var _this = this;\r\n        if (!this.expectChildCount(expression, 2, errors)) {\r\n            return 0;\r\n        }\r\n        var rhv = this.evaluate(expression.getChild(1), errors);\r\n        var total = 0;\r\n        var diceOrGroup = this.findDiceOrGroupNode(expression, errors);\r\n        if (!diceOrGroup) {\r\n            return 0;\r\n        }\r\n        diceOrGroup.forEachChild(function (die) {\r\n            if (!die.getAttribute('drop')) {\r\n                var val = _this.evaluate(die, errors);\r\n                var res = compare(_this.evaluate(die, errors), rhv);\r\n                die.setAttribute('success', res);\r\n                if (res) {\r\n                    total += val;\r\n                }\r\n            }\r\n        });\r\n        return total;\r\n    };\r\n    DiceInterpreter.prototype.findDiceOrGroupNode = function (expression, errors) {\r\n        if (expression.type === Ast.NodeType.Dice || expression.type === Ast.NodeType.Group) {\r\n            return expression;\r\n        }\r\n        if (expression.getChildCount() < 1) {\r\n            errors.push(new error_message_class_1.InterpreterError('Missing dice/group node.', expression));\r\n            return null;\r\n        }\r\n        var child = expression.getChild(0);\r\n        this.evaluate(child, errors);\r\n        return this.findDiceOrGroupNode(child, errors);\r\n    };\r\n    DiceInterpreter.prototype.getSortedDiceRolls = function (dice, direction, errors) {\r\n        var _this = this;\r\n        var output = { rolls: [], total: 0 };\r\n        dice.forEachChild(function (die) {\r\n            output.rolls.push(die);\r\n            output.total += _this.evaluate(die, errors);\r\n        });\r\n        var sortOrder;\r\n        if (direction === 'descending') {\r\n            sortOrder = function (a, b) { return b.getAttribute('value') - a.getAttribute('value'); };\r\n        }\r\n        else if (direction === 'ascending') {\r\n            sortOrder = function (a, b) { return a.getAttribute('value') - b.getAttribute('value'); };\r\n        }\r\n        else {\r\n            errors.push(new error_message_class_1.InterpreterError(\"Unknown sort direction: \" + direction + \". Expected 'ascending' or 'descending'.\", dice));\r\n        }\r\n        output.rolls = output.rolls.sort(sortOrder);\r\n        return output;\r\n    };\r\n    DiceInterpreter.prototype.createDiceRoll = function (sides, errors) {\r\n        var sidesValue = sides instanceof Ast.ExpressionNode\r\n            ? sides.getAttribute('value')\r\n            : sides;\r\n        var diceRoll = this.createDiceRollValue(sides, errors);\r\n        return Ast.Factory.create(Ast.NodeType.DiceRoll)\r\n            .setAttribute('value', diceRoll)\r\n            .setAttribute('drop', false);\r\n    };\r\n    DiceInterpreter.prototype.createDiceRollValue = function (sides, errors) {\r\n        var minValue = 1, maxValue = 0;\r\n        var sidesValue = sides instanceof Ast.ExpressionNode\r\n            ? sides.getAttribute('value')\r\n            : sides;\r\n        if (sidesValue === 'fate') {\r\n            minValue = -1;\r\n            maxValue = 1;\r\n        }\r\n        else {\r\n            maxValue = Math.round(sides instanceof Ast.ExpressionNode ? this.evaluate(sides, errors) : sides);\r\n        }\r\n        return this.random.numberBetween(minValue, maxValue);\r\n    };\r\n    DiceInterpreter.prototype.wouldRollAgainForever = function (dice, expression, errors) {\r\n        var sides = dice.getAttribute('sides');\r\n        var value = expression.getChild(0).getAttribute('value');\r\n        var wouldRunForever = false;\r\n        switch (expression.type) {\r\n            case Ast.NodeType.Equal:\r\n                wouldRunForever = sides === 1 && value === 1;\r\n                break;\r\n            case Ast.NodeType.Greater:\r\n                wouldRunForever = value < 1;\r\n                break;\r\n            case Ast.NodeType.GreaterOrEqual:\r\n                wouldRunForever = value <= 1;\r\n                break;\r\n            case Ast.NodeType.Less:\r\n                wouldRunForever = value > sides;\r\n                break;\r\n            case Ast.NodeType.LessOrEqual: wouldRunForever = value >= sides;\r\n        }\r\n        if (wouldRunForever) {\r\n            errors.push(new error_message_class_1.InterpreterError('Condition to roll again includes all dice faces and would run forever.', expression));\r\n        }\r\n        return wouldRunForever;\r\n    };\r\n    return DiceInterpreter;\r\n}());\r\nexports.DiceInterpreter = DiceInterpreter;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar result_class_1 = require(\"./result.class\");\r\nvar DiceResult = /** @class */ (function (_super) {\r\n    __extends(DiceResult, _super);\r\n    function DiceResult(expression, renderedExpression, total, successes, failures, errors) {\r\n        var _this = _super.call(this, expression, renderedExpression, total) || this;\r\n        _this.successes = successes;\r\n        _this.failures = failures;\r\n        _this.errors = errors;\r\n        return _this;\r\n    }\r\n    return DiceResult;\r\n}(result_class_1.Result));\r\nexports.DiceResult = DiceResult;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar InterpreterError = /** @class */ (function () {\r\n    function InterpreterError(message, expression, stack) {\r\n        if (stack === void 0) { stack = (new Error().stack); }\r\n        this.message = message;\r\n        this.expression = expression;\r\n        this.stack = stack;\r\n    }\r\n    return InterpreterError;\r\n}());\r\nexports.InterpreterError = InterpreterError;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar FunctionDefinitionList = /** @class */ (function () {\r\n    function FunctionDefinitionList() {\r\n    }\r\n    return FunctionDefinitionList;\r\n}());\r\nexports.FunctionDefinitionList = FunctionDefinitionList;\r\n","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(require(\"./dice-result.class\"));\r\n__export(require(\"./dice-interpreter.class\"));\r\n__export(require(\"./error-message.class\"));\r\n__export(require(\"./function-definition-list.class\"));\r\n__export(require(\"./function-definition-list.class\"));\r\n__export(require(\"./dice-interpreter.class\"));\r\n__export(require(\"./dice-result.class\"));\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Result = /** @class */ (function () {\r\n    function Result(reducedExpression, renderedExpression, total) {\r\n        this.reducedExpression = reducedExpression;\r\n        this.renderedExpression = renderedExpression;\r\n        this.total = total;\r\n    }\r\n    return Result;\r\n}());\r\nexports.Result = Result;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar string_character_stream_class_1 = require(\"./string-character-stream.class\");\r\nvar token_class_1 = require(\"./token.class\");\r\nvar token_type_enum_1 = require(\"./token-type.enum\");\r\nvar DiceLexer = /** @class */ (function () {\r\n    function DiceLexer(input) {\r\n        this.numCharRegex = /[0-9]/;\r\n        this.idCharRegex = /[a-zA-Z]/;\r\n        if (this.isCharacterStream(input)) {\r\n            this.stream = input;\r\n        }\r\n        else if (typeof input === 'string') {\r\n            this.stream = new string_character_stream_class_1.StringCharacterStream(input);\r\n        }\r\n        else {\r\n            throw new Error('Unrecognized input type. input must be of type \\'CharacterStream | string\\'.');\r\n        }\r\n    }\r\n    DiceLexer.prototype.isCharacterStream = function (input) {\r\n        return input.getCurrentCharacter;\r\n    };\r\n    DiceLexer.prototype.peekNextToken = function () {\r\n        if (!this.nextToken) {\r\n            this.nextToken = this.constructNextToken();\r\n        }\r\n        return this.nextToken;\r\n    };\r\n    DiceLexer.prototype.getNextToken = function () {\r\n        if (this.nextToken) {\r\n            this.currentToken = this.nextToken;\r\n            this.nextToken = null;\r\n        }\r\n        else {\r\n            this.currentToken = this.constructNextToken();\r\n        }\r\n        return this.currentToken;\r\n    };\r\n    DiceLexer.prototype.parseIdentifier = function () {\r\n        var buffer = this.stream.getCurrentCharacter();\r\n        // TODO: klnull?!\r\n        while (this.stream.peekNextCharacter() && this.idCharRegex.test(this.stream.peekNextCharacter())) {\r\n            buffer += this.stream.getNextCharacter();\r\n        }\r\n        return this.createToken(token_type_enum_1.TokenType.Identifier, buffer);\r\n    };\r\n    DiceLexer.prototype.parseNumber = function () {\r\n        var buffer = this.stream.getCurrentCharacter();\r\n        var hasDot = false;\r\n        var nextChar = this.stream.peekNextCharacter();\r\n        while (nextChar === '.' || this.numCharRegex.test(nextChar)) {\r\n            if (nextChar === '.') {\r\n                if (hasDot) {\r\n                    break;\r\n                }\r\n                hasDot = true;\r\n            }\r\n            buffer += this.stream.getNextCharacter();\r\n            nextChar = this.stream.peekNextCharacter();\r\n        }\r\n        return this.createToken(token_type_enum_1.TokenType.Number, buffer);\r\n    };\r\n    DiceLexer.prototype.parseEllipsis = function () {\r\n        for (var x = 0; x < 2; x++) {\r\n            if (this.stream.peekNextCharacter() !== '.') {\r\n                throw new Error('Missing period in ellipsis.');\r\n            }\r\n            this.stream.getNextCharacter();\r\n        }\r\n        return this.createToken(token_type_enum_1.TokenType.Ellipsis, '...');\r\n    };\r\n    DiceLexer.prototype.constructNextToken = function () {\r\n        var curChar;\r\n        while (curChar = this.stream.getNextCharacter()) {\r\n            switch (true) {\r\n                case this.idCharRegex.test(curChar): return this.parseIdentifier();\r\n                case this.numCharRegex.test(curChar): return this.parseNumber();\r\n                case curChar === '{': return this.createToken(token_type_enum_1.TokenType.BraceOpen, curChar);\r\n                case curChar === '}': return this.createToken(token_type_enum_1.TokenType.BraceClose, curChar);\r\n                case curChar === ',': return this.createToken(token_type_enum_1.TokenType.Comma, curChar);\r\n                case curChar === '(': return this.createToken(token_type_enum_1.TokenType.ParenthesisOpen, curChar);\r\n                case curChar === ')': return this.createToken(token_type_enum_1.TokenType.ParenthesisClose, curChar);\r\n                case curChar === '=': return this.createToken(token_type_enum_1.TokenType.Equals, curChar);\r\n                case curChar === '+': return this.createToken(token_type_enum_1.TokenType.Plus, curChar);\r\n                case curChar === '/': return this.createToken(token_type_enum_1.TokenType.Slash, curChar);\r\n                case curChar === '-': return this.createToken(token_type_enum_1.TokenType.Minus, curChar);\r\n                case curChar === '%': return this.createToken(token_type_enum_1.TokenType.Percent, curChar);\r\n                case curChar === '!': return this.createToken(token_type_enum_1.TokenType.Exclamation, curChar);\r\n                case curChar === '.': return this.parseEllipsis();\r\n                case curChar === '*':\r\n                    if (this.stream.peekNextCharacter() === '*') {\r\n                        this.stream.getNextCharacter();\r\n                        return this.createToken(token_type_enum_1.TokenType.DoubleAsterisk, curChar + this.stream.getCurrentCharacter());\r\n                    }\r\n                    else {\r\n                        return this.createToken(token_type_enum_1.TokenType.Asterisk, curChar);\r\n                    }\r\n                case curChar === '>':\r\n                    if (this.stream.peekNextCharacter() === '=') {\r\n                        this.stream.getNextCharacter();\r\n                        return this.createToken(token_type_enum_1.TokenType.GreaterOrEqual, curChar + this.stream.getCurrentCharacter());\r\n                    }\r\n                    else {\r\n                        return this.createToken(token_type_enum_1.TokenType.Greater, curChar);\r\n                    }\r\n                case curChar === '<':\r\n                    if (this.stream.peekNextCharacter() === '=') {\r\n                        this.stream.getNextCharacter();\r\n                        return this.createToken(token_type_enum_1.TokenType.LessOrEqual, curChar + this.stream.getCurrentCharacter());\r\n                    }\r\n                    else {\r\n                        return this.createToken(token_type_enum_1.TokenType.Less, curChar);\r\n                    }\r\n                case /\\W/.test(curChar):\r\n                    // Ignore whitespace.\r\n                    break;\r\n                default: throw new Error(\"Unknown token: '\" + curChar + \"'.\");\r\n            }\r\n        }\r\n        // Terminator at end of stream.\r\n        return this.createToken(token_type_enum_1.TokenType.Terminator);\r\n    };\r\n    DiceLexer.prototype.createToken = function (type, value) {\r\n        var position = this.stream.getCurrentPosition();\r\n        if (value) {\r\n            position -= value.length - 1;\r\n        }\r\n        return new token_class_1.Token(type, position, value);\r\n    };\r\n    return DiceLexer;\r\n}());\r\nexports.DiceLexer = DiceLexer;\r\n","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(require(\"./string-character-stream.class\"));\r\n__export(require(\"./dice-lexer.class\"));\r\n__export(require(\"./non-global-definition-error.class\"));\r\n__export(require(\"./token-type.enum\"));\r\n__export(require(\"./token.class\"));\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar NonGlobalDefinitionError = /** @class */ (function (_super) {\r\n    __extends(NonGlobalDefinitionError, _super);\r\n    function NonGlobalDefinitionError() {\r\n        return _super.call(this, 'TokenDefinition pattern RegExp must be global.') || this;\r\n    }\r\n    return NonGlobalDefinitionError;\r\n}(Error));\r\nexports.NonGlobalDefinitionError = NonGlobalDefinitionError;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar StringCharacterStream = /** @class */ (function () {\r\n    function StringCharacterStream(input) {\r\n        this.input = input;\r\n        this.index = -1;\r\n    }\r\n    StringCharacterStream.prototype.getCurrentPosition = function () {\r\n        return this.index;\r\n    };\r\n    StringCharacterStream.prototype.getNextCharacter = function () {\r\n        this.index = Math.min(this.index + 1, this.input.length);\r\n        if (this.index >= this.input.length) {\r\n            return null;\r\n        }\r\n        return this.input[this.index];\r\n    };\r\n    StringCharacterStream.prototype.getCurrentCharacter = function () {\r\n        if (this.index < 0 || this.index >= this.input.length) {\r\n            return null;\r\n        }\r\n        return this.input[this.index];\r\n    };\r\n    StringCharacterStream.prototype.peekNextCharacter = function () {\r\n        if (this.index >= this.input.length) {\r\n            return null;\r\n        }\r\n        return this.input[this.index + 1];\r\n    };\r\n    return StringCharacterStream;\r\n}());\r\nexports.StringCharacterStream = StringCharacterStream;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar TokenType;\r\n(function (TokenType) {\r\n    TokenType[TokenType[\"Equals\"] = '='] = \"Equals\";\r\n    TokenType[TokenType[\"Greater\"] = '>'] = \"Greater\";\r\n    TokenType[TokenType[\"GreaterOrEqual\"] = '>='] = \"GreaterOrEqual\";\r\n    TokenType[TokenType[\"Less\"] = '<'] = \"Less\";\r\n    TokenType[TokenType[\"LessOrEqual\"] = '<='] = \"LessOrEqual\";\r\n    TokenType[TokenType[\"BraceClose\"] = '}'] = \"BraceClose\";\r\n    TokenType[TokenType[\"BraceOpen\"] = '{'] = \"BraceOpen\";\r\n    TokenType[TokenType[\"Comma\"] = ','] = \"Comma\";\r\n    TokenType[TokenType[\"Ellipsis\"] = '...'] = \"Ellipsis\";\r\n    TokenType[TokenType[\"Identifier\"] = 'identifier'] = \"Identifier\";\r\n    TokenType[TokenType[\"Plus\"] = '+'] = \"Plus\";\r\n    TokenType[TokenType[\"Slash\"] = '/'] = \"Slash\";\r\n    TokenType[TokenType[\"DoubleAsterisk\"] = '**'] = \"DoubleAsterisk\";\r\n    TokenType[TokenType[\"Percent\"] = '%'] = \"Percent\";\r\n    TokenType[TokenType[\"Asterisk\"] = '*'] = \"Asterisk\";\r\n    TokenType[TokenType[\"Minus\"] = '-'] = \"Minus\";\r\n    TokenType[TokenType[\"Number\"] = 'number'] = \"Number\";\r\n    TokenType[TokenType[\"ParenthesisClose\"] = ')'] = \"ParenthesisClose\";\r\n    TokenType[TokenType[\"ParenthesisOpen\"] = '('] = \"ParenthesisOpen\";\r\n    TokenType[TokenType[\"Terminator\"] = 'terminator'] = \"Terminator\";\r\n    TokenType[TokenType[\"Exclamation\"] = '!'] = \"Exclamation\";\r\n})(TokenType = exports.TokenType || (exports.TokenType = {}));\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Token = /** @class */ (function () {\r\n    function Token(type, position, value) {\r\n        this.type = type;\r\n        this.position = position;\r\n        this.value = value;\r\n    }\r\n    return Token;\r\n}());\r\nexports.Token = Token;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar lexer_1 = require(\"../lexer\");\r\nvar error_message_class_1 = require(\"./error-message.class\");\r\nvar BasicParser = /** @class */ (function () {\r\n    function BasicParser(input) {\r\n        if (this.isLexer(input)) {\r\n            this.lexer = input;\r\n        }\r\n        else if (typeof input === 'string') {\r\n            this.lexer = new lexer_1.DiceLexer(input);\r\n        }\r\n        else {\r\n            throw new Error('Unrecognized input type. input must be of type \\'Lexer | string\\'.');\r\n        }\r\n    }\r\n    BasicParser.prototype.isLexer = function (input) {\r\n        return input.getNextToken;\r\n    };\r\n    BasicParser.prototype.expectAndConsume = function (result, expected, actual) {\r\n        this.expect(result, expected, actual);\r\n        return this.lexer.getNextToken();\r\n    };\r\n    BasicParser.prototype.expect = function (result, expected, actual) {\r\n        actual = actual || this.lexer.peekNextToken();\r\n        if (actual.type !== expected) {\r\n            this.errorToken(result, expected, actual);\r\n        }\r\n        return actual;\r\n    };\r\n    BasicParser.prototype.errorToken = function (result, expected, actual) {\r\n        var message = \"Error at position \" + actual.position + \".\";\r\n        message += \" Expected token of type \" + expected + \", found token of type \" + actual.type + \" of value \\\"\" + actual.value + \"\\\".\";\r\n        this.errorMessage(result, message, actual);\r\n    };\r\n    BasicParser.prototype.errorMessage = function (result, message, token) {\r\n        result.errors.push(new error_message_class_1.ParserError(message, token, new Error().stack));\r\n    };\r\n    return BasicParser;\r\n}());\r\nexports.BasicParser = BasicParser;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Ast = require(\"../ast\");\r\nvar lexer_1 = require(\"../lexer\");\r\nvar basic_parser_class_1 = require(\"./basic-parser.class\");\r\nvar parse_result_class_1 = require(\"./parse-result.class\");\r\nvar BooleanOperatorMap = {};\r\nBooleanOperatorMap[lexer_1.TokenType.Equals] = Ast.NodeType.Equal;\r\nBooleanOperatorMap[lexer_1.TokenType.Greater] = Ast.NodeType.Greater;\r\nBooleanOperatorMap[lexer_1.TokenType.Less] = Ast.NodeType.Less;\r\nBooleanOperatorMap[lexer_1.TokenType.GreaterOrEqual] = Ast.NodeType.GreaterOrEqual;\r\nBooleanOperatorMap[lexer_1.TokenType.LessOrEqual] = Ast.NodeType.LessOrEqual;\r\nvar AddOperatorMap = {};\r\nAddOperatorMap[lexer_1.TokenType.Plus] = Ast.NodeType.Add;\r\nAddOperatorMap[lexer_1.TokenType.Minus] = Ast.NodeType.Subtract;\r\nvar MultiOperatorMap = {};\r\nMultiOperatorMap[lexer_1.TokenType.DoubleAsterisk] = Ast.NodeType.Exponent;\r\nMultiOperatorMap[lexer_1.TokenType.Asterisk] = Ast.NodeType.Multiply;\r\nMultiOperatorMap[lexer_1.TokenType.Slash] = Ast.NodeType.Divide;\r\nMultiOperatorMap[lexer_1.TokenType.Percent] = Ast.NodeType.Modulo;\r\nvar DiceParser = /** @class */ (function (_super) {\r\n    __extends(DiceParser, _super);\r\n    function DiceParser(input) {\r\n        return _super.call(this, input) || this;\r\n    }\r\n    DiceParser.prototype.parse = function () {\r\n        var result = new parse_result_class_1.ParseResult();\r\n        result.root = this.parseExpression(result);\r\n        return result;\r\n    };\r\n    DiceParser.prototype.parseExpression = function (result) {\r\n        var root = this.parseSimpleExpression(result);\r\n        var tokenType = this.lexer.peekNextToken().type;\r\n        if (Object.keys(BooleanOperatorMap).indexOf(tokenType.toString()) > -1) {\r\n            var newRoot = Ast.Factory.create(BooleanOperatorMap[tokenType]);\r\n            this.lexer.getNextToken();\r\n            newRoot.addChild(root);\r\n            newRoot.addChild(this.parseSimpleExpression(result));\r\n            root = newRoot;\r\n        }\r\n        return root;\r\n    };\r\n    DiceParser.prototype.parseSimpleExpression = function (result) {\r\n        var tokenType = this.lexer.peekNextToken().type;\r\n        if (Object.keys(AddOperatorMap).indexOf(tokenType.toString()) > -1) {\r\n            this.lexer.getNextToken();\r\n        }\r\n        var root = this.parseTerm(result);\r\n        if (tokenType === lexer_1.TokenType.Minus) {\r\n            var negateNode = Ast.Factory.create(Ast.NodeType.Negate);\r\n            negateNode.addChild(root);\r\n            root = negateNode;\r\n        }\r\n        tokenType = this.lexer.peekNextToken().type;\r\n        while (Object.keys(AddOperatorMap).indexOf(tokenType.toString()) > -1) {\r\n            var newRoot = Ast.Factory.create(AddOperatorMap[tokenType]);\r\n            newRoot.addChild(root);\r\n            // Consume the operator.\r\n            this.lexer.getNextToken();\r\n            newRoot.addChild(this.parseTerm(result));\r\n            root = newRoot;\r\n            tokenType = this.lexer.peekNextToken().type;\r\n        }\r\n        return root;\r\n    };\r\n    DiceParser.prototype.parseTerm = function (result) {\r\n        var root = this.parseFactor(result);\r\n        var tokenType = this.lexer.peekNextToken().type;\r\n        while (Object.keys(MultiOperatorMap).indexOf(tokenType.toString()) > -1) {\r\n            var newRoot = Ast.Factory.create(MultiOperatorMap[tokenType]);\r\n            newRoot.addChild(root);\r\n            // Consume the operator.\r\n            this.lexer.getNextToken();\r\n            newRoot.addChild(this.parseFactor(result));\r\n            root = newRoot;\r\n            tokenType = this.lexer.peekNextToken().type;\r\n        }\r\n        return root;\r\n    };\r\n    DiceParser.prototype.parseFactor = function (result) {\r\n        var root;\r\n        var token = this.lexer.peekNextToken();\r\n        switch (token.type) {\r\n            case lexer_1.TokenType.Identifier:\r\n                if (token.value === 'd' || token.value === 'dF') {\r\n                    root = this.parseDice(result);\r\n                }\r\n                else {\r\n                    root = this.parseFunction(result);\r\n                }\r\n                break;\r\n            case lexer_1.TokenType.ParenthesisOpen:\r\n                root = this.parseBracketedExpression(result);\r\n                if (this.lexer.peekNextToken().type === lexer_1.TokenType.Identifier) {\r\n                    root = this.parseDice(result, root);\r\n                }\r\n                break;\r\n            case lexer_1.TokenType.BraceOpen:\r\n                root = this.parseGroup(result);\r\n                break;\r\n            case lexer_1.TokenType.Number:\r\n                var number = this.parseNumber(result);\r\n                if (this.lexer.peekNextToken().type !== lexer_1.TokenType.Identifier) {\r\n                    root = number;\r\n                }\r\n                else {\r\n                    root = this.parseDice(result, number);\r\n                }\r\n                break;\r\n            default: this.errorToken(result, lexer_1.TokenType.Number, token);\r\n        }\r\n        return root;\r\n    };\r\n    DiceParser.prototype.parseSimpleFactor = function (result) {\r\n        var token = this.lexer.peekNextToken();\r\n        switch (token.type) {\r\n            case lexer_1.TokenType.Number: return this.parseNumber(result);\r\n            case lexer_1.TokenType.ParenthesisOpen: return this.parseBracketedExpression(result);\r\n            case lexer_1.TokenType.Identifier: return Ast.Factory.create(Ast.NodeType.Number).setAttribute('value', Number(1));\r\n            default: this.errorToken(result, lexer_1.TokenType.Number, token);\r\n        }\r\n    };\r\n    DiceParser.prototype.parseFunction = function (result) {\r\n        var functionName = this.expectAndConsume(result, lexer_1.TokenType.Identifier);\r\n        var root = Ast.Factory.create(Ast.NodeType.Function)\r\n            .setAttribute('name', functionName.value);\r\n        this.expectAndConsume(result, lexer_1.TokenType.ParenthesisOpen);\r\n        // Parse function arguments.\r\n        var token = this.lexer.peekNextToken();\r\n        if (token.type !== lexer_1.TokenType.ParenthesisClose) {\r\n            root.addChild(this.parseExpression(result));\r\n            while (this.lexer.peekNextToken().type === lexer_1.TokenType.Comma) {\r\n                this.lexer.getNextToken(); // Consume the comma.\r\n                root.addChild(this.parseExpression(result));\r\n            }\r\n        }\r\n        this.expectAndConsume(result, lexer_1.TokenType.ParenthesisClose);\r\n        return root;\r\n    };\r\n    DiceParser.prototype.parseNumber = function (result) {\r\n        var numberToken = this.lexer.getNextToken();\r\n        return Ast.Factory.create(Ast.NodeType.Number)\r\n            .setAttribute('value', Number(numberToken.value));\r\n    };\r\n    DiceParser.prototype.parseBracketedExpression = function (result) {\r\n        this.lexer.getNextToken(); // Consume the opening bracket.\r\n        var root = this.parseExpression(result);\r\n        this.expectAndConsume(result, lexer_1.TokenType.ParenthesisClose);\r\n        return root;\r\n    };\r\n    DiceParser.prototype.parseGroup = function (result) {\r\n        this.lexer.getNextToken(); // Consume the opening brace.\r\n        var root = Ast.Factory.create(Ast.NodeType.Group);\r\n        // Parse group elements.\r\n        var token = this.lexer.peekNextToken();\r\n        if (token.type !== lexer_1.TokenType.BraceClose) {\r\n            do {\r\n                if (this.lexer.peekNextToken().type === lexer_1.TokenType.Comma) {\r\n                    this.lexer.getNextToken(); // Consume the comma.\r\n                }\r\n                var exp = this.parseExpression(result);\r\n                if (this.lexer.peekNextToken().type === lexer_1.TokenType.Ellipsis) {\r\n                    exp = this.parseRepeat(result, exp);\r\n                }\r\n                root.addChild(exp);\r\n            } while (this.lexer.peekNextToken().type === lexer_1.TokenType.Comma);\r\n        }\r\n        this.expectAndConsume(result, lexer_1.TokenType.BraceClose);\r\n        return this.parseGroupModifiers(result, root);\r\n    };\r\n    DiceParser.prototype.parseRepeat = function (result, lhs) {\r\n        this.lexer.getNextToken(); // Consume the ellipsis.\r\n        var root = Ast.Factory.create(Ast.NodeType.Repeat);\r\n        root.addChild(lhs);\r\n        root.addChild(this.parseExpression(result));\r\n        return root;\r\n    };\r\n    DiceParser.prototype.parseDice = function (result, rollTimes) {\r\n        var root = this.parseDiceRoll(result, rollTimes);\r\n        root = this.parseDiceModifiers(result, root);\r\n        return root;\r\n    };\r\n    DiceParser.prototype.parseDiceRoll = function (result, rollTimes) {\r\n        if (!rollTimes) {\r\n            rollTimes = this.parseSimpleFactor(result);\r\n        }\r\n        var token = this.expectAndConsume(result, lexer_1.TokenType.Identifier);\r\n        var root = Ast.Factory.create(Ast.NodeType.Dice);\r\n        root.addChild(rollTimes);\r\n        switch (token.value) {\r\n            case 'd':\r\n                var sidesToken = this.expectAndConsume(result, lexer_1.TokenType.Number);\r\n                root.addChild(Ast.Factory.create(Ast.NodeType.DiceSides))\r\n                    .setAttribute('value', Number(sidesToken.value));\r\n                break;\r\n            case 'dF':\r\n                root.addChild(Ast.Factory.create(Ast.NodeType.DiceSides))\r\n                    .setAttribute('value', 'fate');\r\n                break;\r\n        }\r\n        return root;\r\n    };\r\n    DiceParser.prototype.parseExplode = function (result, lhs) {\r\n        var root = Ast.Factory.create(Ast.NodeType.Explode);\r\n        root.setAttribute('compound', false);\r\n        root.setAttribute('penetrate', false);\r\n        if (lhs) {\r\n            root.addChild(lhs);\r\n        }\r\n        this.lexer.getNextToken();\r\n        var token = this.lexer.peekNextToken();\r\n        if (token.type === lexer_1.TokenType.Exclamation) {\r\n            root.setAttribute('compound', true);\r\n            this.lexer.getNextToken(); // Consume second !.\r\n        }\r\n        token = this.lexer.peekNextToken();\r\n        if (token.type === lexer_1.TokenType.Identifier) {\r\n            if (token.value === 'p') {\r\n                root.setAttribute('penetrate', true);\r\n            }\r\n            this.lexer.getNextToken(); // Consume p.\r\n        }\r\n        var tokenType = this.lexer.peekNextToken().type;\r\n        if (Object.keys(BooleanOperatorMap).indexOf(tokenType.toString()) > -1) {\r\n            root.addChild(this.parseCompareModifier(result));\r\n        }\r\n        return root;\r\n    };\r\n    DiceParser.prototype.parseCritical = function (result, lhs) {\r\n        var root = Ast.Factory.create(Ast.NodeType.Critical);\r\n        root.setAttribute('type', 'success');\r\n        if (lhs) {\r\n            root.addChild(lhs);\r\n        }\r\n        var token = this.lexer.peekNextToken();\r\n        if (token.type === lexer_1.TokenType.Identifier) {\r\n            switch (token.value) {\r\n                case 'c':\r\n                    root.setAttribute('type', 'success');\r\n                    break;\r\n                case 'cs':\r\n                    root.setAttribute('type', 'success');\r\n                    break;\r\n                case 'cf':\r\n                    root.setAttribute('type', 'failure');\r\n                    break;\r\n                default: this.errorMessage(result, \"Unknown critical type \" + token.value + \". Must be (c|cs|cf).\", token);\r\n            }\r\n        }\r\n        this.lexer.getNextToken();\r\n        var tokenType = this.lexer.peekNextToken().type;\r\n        if (Object.keys(BooleanOperatorMap).indexOf(tokenType.toString()) > -1) {\r\n            root.addChild(this.parseCompareModifier(result));\r\n        }\r\n        return root;\r\n    };\r\n    DiceParser.prototype.parseKeep = function (result, lhs) {\r\n        var root = Ast.Factory.create(Ast.NodeType.Keep);\r\n        root.setAttribute('type', 'highest');\r\n        if (lhs) {\r\n            root.addChild(lhs);\r\n        }\r\n        var token = this.lexer.peekNextToken();\r\n        if (token.type === lexer_1.TokenType.Identifier) {\r\n            switch (token.value) {\r\n                case 'k':\r\n                    root.setAttribute('type', 'highest');\r\n                    break;\r\n                case 'kh':\r\n                    root.setAttribute('type', 'highest');\r\n                    break;\r\n                case 'kl':\r\n                    root.setAttribute('type', 'lowest');\r\n                    break;\r\n                default: this.errorMessage(result, \"Unknown keep type \" + token.value + \". Must be (k|kh|kl).\", token);\r\n            }\r\n        }\r\n        this.lexer.getNextToken(); // Consume.\r\n        var tokenType = this.lexer.peekNextToken().type;\r\n        if (tokenType === lexer_1.TokenType.Number || tokenType === lexer_1.TokenType.ParenthesisOpen) {\r\n            root.addChild(this.parseSimpleFactor(result));\r\n        }\r\n        else {\r\n            root.addChild(Ast.Factory.create(Ast.NodeType.Number).setAttribute('value', 1));\r\n        }\r\n        return root;\r\n    };\r\n    DiceParser.prototype.parseDrop = function (result, lhs) {\r\n        var root = Ast.Factory.create(Ast.NodeType.Drop);\r\n        root.setAttribute('type', 'lowest');\r\n        if (lhs) {\r\n            root.addChild(lhs);\r\n        }\r\n        var token = this.lexer.peekNextToken();\r\n        if (token.type === lexer_1.TokenType.Identifier) {\r\n            switch (token.value) {\r\n                case 'd':\r\n                    root.setAttribute('type', 'lowest');\r\n                    break;\r\n                case 'dh':\r\n                    root.setAttribute('type', 'highest');\r\n                    break;\r\n                case 'dl':\r\n                    root.setAttribute('type', 'lowest');\r\n                    break;\r\n                default: this.errorMessage(result, \"Unknown drop type \" + token.value + \". Must be (d|dh|dl).\", token);\r\n            }\r\n        }\r\n        this.lexer.getNextToken(); // Consume.\r\n        var tokenType = this.lexer.peekNextToken().type;\r\n        if (tokenType === lexer_1.TokenType.Number || tokenType === lexer_1.TokenType.ParenthesisOpen) {\r\n            root.addChild(this.parseSimpleFactor(result));\r\n        }\r\n        return root;\r\n    };\r\n    DiceParser.prototype.parseReroll = function (result, lhs) {\r\n        var root = Ast.Factory.create(Ast.NodeType.Reroll);\r\n        root.setAttribute('once', false);\r\n        if (lhs) {\r\n            root.addChild(lhs);\r\n        }\r\n        var token = this.lexer.peekNextToken();\r\n        if (token.type === lexer_1.TokenType.Identifier) {\r\n            switch (token.value) {\r\n                case 'r':\r\n                    root.setAttribute('once', false);\r\n                    break;\r\n                case 'ro':\r\n                    root.setAttribute('once', true);\r\n                    break;\r\n                default: this.errorMessage(result, \"Unknown drop type \" + token.value + \". Must be (r|ro).\", token);\r\n            }\r\n        }\r\n        this.lexer.getNextToken(); // Consume.\r\n        var tokenType = this.lexer.peekNextToken().type;\r\n        if (Object.keys(BooleanOperatorMap).indexOf(tokenType.toString()) > -1) {\r\n            root.addChild(this.parseCompareModifier(result));\r\n        }\r\n        return root;\r\n    };\r\n    DiceParser.prototype.parseSort = function (result, lhs) {\r\n        var root = Ast.Factory.create(Ast.NodeType.Sort);\r\n        root.setAttribute('direction', 'ascending');\r\n        if (lhs) {\r\n            root.addChild(lhs);\r\n        }\r\n        var token = this.lexer.peekNextToken();\r\n        if (token.type === lexer_1.TokenType.Identifier) {\r\n            switch (token.value) {\r\n                case 's':\r\n                    root.setAttribute('direction', 'ascending');\r\n                    break;\r\n                case 'sa':\r\n                    root.setAttribute('direction', 'ascending');\r\n                    break;\r\n                case 'sd':\r\n                    root.setAttribute('direction', 'descending');\r\n                    break;\r\n                default: this.errorMessage(result, \"Unknown sort type \" + token.value + \". Must be (s|sa|sd).\", token);\r\n            }\r\n        }\r\n        this.lexer.getNextToken(); // Consume.\r\n        return root;\r\n    };\r\n    DiceParser.prototype.parseCompareModifier = function (result, lhs) {\r\n        var token = this.lexer.peekNextToken();\r\n        var root;\r\n        if (token.type === lexer_1.TokenType.Number) {\r\n            root = Ast.Factory.create(Ast.NodeType.Equal);\r\n        }\r\n        else if (Object.keys(BooleanOperatorMap).indexOf(token.type.toString()) > -1) {\r\n            root = Ast.Factory.create(BooleanOperatorMap[token.type]);\r\n            this.lexer.getNextToken();\r\n        }\r\n        else {\r\n            this.errorToken(result, lexer_1.TokenType.Number, token);\r\n        }\r\n        if (lhs) {\r\n            root.addChild(lhs);\r\n        }\r\n        root.addChild(this.parseSimpleFactor(result));\r\n        return root;\r\n    };\r\n    DiceParser.prototype.parseDiceModifiers = function (result, root) {\r\n        while (true) {\r\n            var token = this.lexer.peekNextToken();\r\n            if (Object.keys(BooleanOperatorMap).indexOf(token.type.toString()) > -1) {\r\n                root = this.parseCompareModifier(result, root);\r\n            }\r\n            else if (token.type === lexer_1.TokenType.Identifier) {\r\n                switch (token.value[0]) {\r\n                    case 'c':\r\n                        root = this.parseCritical(result, root);\r\n                        break;\r\n                    case 'd':\r\n                        root = this.parseDrop(result, root);\r\n                        break;\r\n                    case 'k':\r\n                        root = this.parseKeep(result, root);\r\n                        break;\r\n                    case 'r':\r\n                        root = this.parseReroll(result, root);\r\n                        break;\r\n                    case 's':\r\n                        root = this.parseSort(result, root);\r\n                        break;\r\n                    default:\r\n                        this.errorToken(result, lexer_1.TokenType.Identifier, token);\r\n                        return root;\r\n                }\r\n            }\r\n            else if (token.type === lexer_1.TokenType.Exclamation) {\r\n                root = this.parseExplode(result, root);\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        return root;\r\n    };\r\n    DiceParser.prototype.parseGroupModifiers = function (result, root) {\r\n        while (true) {\r\n            var token = this.lexer.peekNextToken();\r\n            if (Object.keys(BooleanOperatorMap).indexOf(token.type.toString()) > -1) {\r\n                root = this.parseCompareModifier(result, root);\r\n            }\r\n            else if (token.type === lexer_1.TokenType.Identifier) {\r\n                switch (token.value[0]) {\r\n                    case 'd':\r\n                        root = this.parseDrop(result, root);\r\n                        break;\r\n                    case 'k':\r\n                        root = this.parseKeep(result, root);\r\n                        break;\r\n                    case 's':\r\n                        root = this.parseSort(result, root);\r\n                        break;\r\n                    default:\r\n                        this.errorToken(result, lexer_1.TokenType.Identifier, token);\r\n                        return root;\r\n                }\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        return root;\r\n    };\r\n    return DiceParser;\r\n}(basic_parser_class_1.BasicParser));\r\nexports.DiceParser = DiceParser;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ParserError = /** @class */ (function () {\r\n    function ParserError(message, token, stackTrace) {\r\n        this.message = message;\r\n        this.token = token;\r\n        this.stackTrace = stackTrace;\r\n    }\r\n    return ParserError;\r\n}());\r\nexports.ParserError = ParserError;\r\n","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(require(\"./error-message.class\"));\r\n__export(require(\"./parse-result.class\"));\r\n__export(require(\"./dice-parser.class\"));\r\n__export(require(\"./basic-parser.class\"));\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ParseResult = /** @class */ (function () {\r\n    function ParseResult() {\r\n        this.errors = [];\r\n    }\r\n    return ParseResult;\r\n}());\r\nexports.ParseResult = ParseResult;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Random = require(\"random-js\");\r\nvar DefaultRandomProvider = /** @class */ (function () {\r\n    function DefaultRandomProvider() {\r\n        this.random = new Random(Random.engines.mt19937().autoSeed());\r\n    }\r\n    DefaultRandomProvider.prototype.numberBetween = function (min, max) {\r\n        return this.random.integer(min, max);\r\n    };\r\n    return DefaultRandomProvider;\r\n}());\r\nexports.DefaultRandomProvider = DefaultRandomProvider;\r\n","\"use strict\";\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(require(\"./default-random-provider.class\"));\r\n","/*jshint eqnull:true*/\n(function (root) {\n  \"use strict\";\n\n  var GLOBAL_KEY = \"Random\";\n\n  var imul = (typeof Math.imul !== \"function\" || Math.imul(0xffffffff, 5) !== -5 ?\n    function (a, b) {\n      var ah = (a >>> 16) & 0xffff;\n      var al = a & 0xffff;\n      var bh = (b >>> 16) & 0xffff;\n      var bl = b & 0xffff;\n      // the shift by 0 fixes the sign on the high part\n      // the final |0 converts the unsigned value into a signed value\n      return (al * bl) + (((ah * bl + al * bh) << 16) >>> 0) | 0;\n    } :\n    Math.imul);\n\n  var stringRepeat = (typeof String.prototype.repeat === \"function\" && \"x\".repeat(3) === \"xxx\" ?\n    function (x, y) {\n      return x.repeat(y);\n    } : function (pattern, count) {\n      var result = \"\";\n      while (count > 0) {\n        if (count & 1) {\n          result += pattern;\n        }\n        count >>= 1;\n        pattern += pattern;\n      }\n      return result;\n    });\n\n  function Random(engine) {\n    if (!(this instanceof Random)) {\n      return new Random(engine);\n    }\n\n    if (engine == null) {\n      engine = Random.engines.nativeMath;\n    } else if (typeof engine !== \"function\") {\n      throw new TypeError(\"Expected engine to be a function, got \" + typeof engine);\n    }\n    this.engine = engine;\n  }\n  var proto = Random.prototype;\n\n  Random.engines = {\n    nativeMath: function () {\n      return (Math.random() * 0x100000000) | 0;\n    },\n    mt19937: (function (Int32Array) {\n      // http://en.wikipedia.org/wiki/Mersenne_twister\n      function refreshData(data) {\n        var k = 0;\n        var tmp = 0;\n        for (;\n          (k | 0) < 227; k = (k + 1) | 0) {\n          tmp = (data[k] & 0x80000000) | (data[(k + 1) | 0] & 0x7fffffff);\n          data[k] = data[(k + 397) | 0] ^ (tmp >>> 1) ^ ((tmp & 0x1) ? 0x9908b0df : 0);\n        }\n\n        for (;\n          (k | 0) < 623; k = (k + 1) | 0) {\n          tmp = (data[k] & 0x80000000) | (data[(k + 1) | 0] & 0x7fffffff);\n          data[k] = data[(k - 227) | 0] ^ (tmp >>> 1) ^ ((tmp & 0x1) ? 0x9908b0df : 0);\n        }\n\n        tmp = (data[623] & 0x80000000) | (data[0] & 0x7fffffff);\n        data[623] = data[396] ^ (tmp >>> 1) ^ ((tmp & 0x1) ? 0x9908b0df : 0);\n      }\n\n      function temper(value) {\n        value ^= value >>> 11;\n        value ^= (value << 7) & 0x9d2c5680;\n        value ^= (value << 15) & 0xefc60000;\n        return value ^ (value >>> 18);\n      }\n\n      function seedWithArray(data, source) {\n        var i = 1;\n        var j = 0;\n        var sourceLength = source.length;\n        var k = Math.max(sourceLength, 624) | 0;\n        var previous = data[0] | 0;\n        for (;\n          (k | 0) > 0; --k) {\n          data[i] = previous = ((data[i] ^ imul((previous ^ (previous >>> 30)), 0x0019660d)) + (source[j] | 0) + (j | 0)) | 0;\n          i = (i + 1) | 0;\n          ++j;\n          if ((i | 0) > 623) {\n            data[0] = data[623];\n            i = 1;\n          }\n          if (j >= sourceLength) {\n            j = 0;\n          }\n        }\n        for (k = 623;\n          (k | 0) > 0; --k) {\n          data[i] = previous = ((data[i] ^ imul((previous ^ (previous >>> 30)), 0x5d588b65)) - i) | 0;\n          i = (i + 1) | 0;\n          if ((i | 0) > 623) {\n            data[0] = data[623];\n            i = 1;\n          }\n        }\n        data[0] = 0x80000000;\n      }\n\n      function mt19937() {\n        var data = new Int32Array(624);\n        var index = 0;\n        var uses = 0;\n\n        function next() {\n          if ((index | 0) >= 624) {\n            refreshData(data);\n            index = 0;\n          }\n\n          var value = data[index];\n          index = (index + 1) | 0;\n          uses += 1;\n          return temper(value) | 0;\n        }\n        next.getUseCount = function() {\n          return uses;\n        };\n        next.discard = function (count) {\n          uses += count;\n          if ((index | 0) >= 624) {\n            refreshData(data);\n            index = 0;\n          }\n          while ((count - index) > 624) {\n            count -= 624 - index;\n            refreshData(data);\n            index = 0;\n          }\n          index = (index + count) | 0;\n          return next;\n        };\n        next.seed = function (initial) {\n          var previous = 0;\n          data[0] = previous = initial | 0;\n\n          for (var i = 1; i < 624; i = (i + 1) | 0) {\n            data[i] = previous = (imul((previous ^ (previous >>> 30)), 0x6c078965) + i) | 0;\n          }\n          index = 624;\n          uses = 0;\n          return next;\n        };\n        next.seedWithArray = function (source) {\n          next.seed(0x012bd6aa);\n          seedWithArray(data, source);\n          return next;\n        };\n        next.autoSeed = function () {\n          return next.seedWithArray(Random.generateEntropyArray());\n        };\n        return next;\n      }\n\n      return mt19937;\n    }(typeof Int32Array === \"function\" ? Int32Array : Array)),\n    browserCrypto: (typeof crypto !== \"undefined\" && typeof crypto.getRandomValues === \"function\" && typeof Int32Array === \"function\") ? (function () {\n      var data = null;\n      var index = 128;\n\n      return function () {\n        if (index >= 128) {\n          if (data === null) {\n            data = new Int32Array(128);\n          }\n          crypto.getRandomValues(data);\n          index = 0;\n        }\n\n        return data[index++] | 0;\n      };\n    }()) : null\n  };\n\n  Random.generateEntropyArray = function () {\n    var array = [];\n    var engine = Random.engines.nativeMath;\n    for (var i = 0; i < 16; ++i) {\n      array[i] = engine() | 0;\n    }\n    array.push(new Date().getTime() | 0);\n    return array;\n  };\n\n  function returnValue(value) {\n    return function () {\n      return value;\n    };\n  }\n\n  // [-0x80000000, 0x7fffffff]\n  Random.int32 = function (engine) {\n    return engine() | 0;\n  };\n  proto.int32 = function () {\n    return Random.int32(this.engine);\n  };\n\n  // [0, 0xffffffff]\n  Random.uint32 = function (engine) {\n    return engine() >>> 0;\n  };\n  proto.uint32 = function () {\n    return Random.uint32(this.engine);\n  };\n\n  // [0, 0x1fffffffffffff]\n  Random.uint53 = function (engine) {\n    var high = engine() & 0x1fffff;\n    var low = engine() >>> 0;\n    return (high * 0x100000000) + low;\n  };\n  proto.uint53 = function () {\n    return Random.uint53(this.engine);\n  };\n\n  // [0, 0x20000000000000]\n  Random.uint53Full = function (engine) {\n    while (true) {\n      var high = engine() | 0;\n      if (high & 0x200000) {\n        if ((high & 0x3fffff) === 0x200000 && (engine() | 0) === 0) {\n          return 0x20000000000000;\n        }\n      } else {\n        var low = engine() >>> 0;\n        return ((high & 0x1fffff) * 0x100000000) + low;\n      }\n    }\n  };\n  proto.uint53Full = function () {\n    return Random.uint53Full(this.engine);\n  };\n\n  // [-0x20000000000000, 0x1fffffffffffff]\n  Random.int53 = function (engine) {\n    var high = engine() | 0;\n    var low = engine() >>> 0;\n    return ((high & 0x1fffff) * 0x100000000) + low + (high & 0x200000 ? -0x20000000000000 : 0);\n  };\n  proto.int53 = function () {\n    return Random.int53(this.engine);\n  };\n\n  // [-0x20000000000000, 0x20000000000000]\n  Random.int53Full = function (engine) {\n    while (true) {\n      var high = engine() | 0;\n      if (high & 0x400000) {\n        if ((high & 0x7fffff) === 0x400000 && (engine() | 0) === 0) {\n          return 0x20000000000000;\n        }\n      } else {\n        var low = engine() >>> 0;\n        return ((high & 0x1fffff) * 0x100000000) + low + (high & 0x200000 ? -0x20000000000000 : 0);\n      }\n    }\n  };\n  proto.int53Full = function () {\n    return Random.int53Full(this.engine);\n  };\n\n  function add(generate, addend) {\n    if (addend === 0) {\n      return generate;\n    } else {\n      return function (engine) {\n        return generate(engine) + addend;\n      };\n    }\n  }\n\n  Random.integer = (function () {\n    function isPowerOfTwoMinusOne(value) {\n      return ((value + 1) & value) === 0;\n    }\n\n    function bitmask(masking) {\n      return function (engine) {\n        return engine() & masking;\n      };\n    }\n\n    function downscaleToLoopCheckedRange(range) {\n      var extendedRange = range + 1;\n      var maximum = extendedRange * Math.floor(0x100000000 / extendedRange);\n      return function (engine) {\n        var value = 0;\n        do {\n          value = engine() >>> 0;\n        } while (value >= maximum);\n        return value % extendedRange;\n      };\n    }\n\n    function downscaleToRange(range) {\n      if (isPowerOfTwoMinusOne(range)) {\n        return bitmask(range);\n      } else {\n        return downscaleToLoopCheckedRange(range);\n      }\n    }\n\n    function isEvenlyDivisibleByMaxInt32(value) {\n      return (value | 0) === 0;\n    }\n\n    function upscaleWithHighMasking(masking) {\n      return function (engine) {\n        var high = engine() & masking;\n        var low = engine() >>> 0;\n        return (high * 0x100000000) + low;\n      };\n    }\n\n    function upscaleToLoopCheckedRange(extendedRange) {\n      var maximum = extendedRange * Math.floor(0x20000000000000 / extendedRange);\n      return function (engine) {\n        var ret = 0;\n        do {\n          var high = engine() & 0x1fffff;\n          var low = engine() >>> 0;\n          ret = (high * 0x100000000) + low;\n        } while (ret >= maximum);\n        return ret % extendedRange;\n      };\n    }\n\n    function upscaleWithinU53(range) {\n      var extendedRange = range + 1;\n      if (isEvenlyDivisibleByMaxInt32(extendedRange)) {\n        var highRange = ((extendedRange / 0x100000000) | 0) - 1;\n        if (isPowerOfTwoMinusOne(highRange)) {\n          return upscaleWithHighMasking(highRange);\n        }\n      }\n      return upscaleToLoopCheckedRange(extendedRange);\n    }\n\n    function upscaleWithinI53AndLoopCheck(min, max) {\n      return function (engine) {\n        var ret = 0;\n        do {\n          var high = engine() | 0;\n          var low = engine() >>> 0;\n          ret = ((high & 0x1fffff) * 0x100000000) + low + (high & 0x200000 ? -0x20000000000000 : 0);\n        } while (ret < min || ret > max);\n        return ret;\n      };\n    }\n\n    return function (min, max) {\n      min = Math.floor(min);\n      max = Math.floor(max);\n      if (min < -0x20000000000000 || !isFinite(min)) {\n        throw new RangeError(\"Expected min to be at least \" + (-0x20000000000000));\n      } else if (max > 0x20000000000000 || !isFinite(max)) {\n        throw new RangeError(\"Expected max to be at most \" + 0x20000000000000);\n      }\n\n      var range = max - min;\n      if (range <= 0 || !isFinite(range)) {\n        return returnValue(min);\n      } else if (range === 0xffffffff) {\n        if (min === 0) {\n          return Random.uint32;\n        } else {\n          return add(Random.int32, min + 0x80000000);\n        }\n      } else if (range < 0xffffffff) {\n        return add(downscaleToRange(range), min);\n      } else if (range === 0x1fffffffffffff) {\n        return add(Random.uint53, min);\n      } else if (range < 0x1fffffffffffff) {\n        return add(upscaleWithinU53(range), min);\n      } else if (max - 1 - min === 0x1fffffffffffff) {\n        return add(Random.uint53Full, min);\n      } else if (min === -0x20000000000000 && max === 0x20000000000000) {\n        return Random.int53Full;\n      } else if (min === -0x20000000000000 && max === 0x1fffffffffffff) {\n        return Random.int53;\n      } else if (min === -0x1fffffffffffff && max === 0x20000000000000) {\n        return add(Random.int53, 1);\n      } else if (max === 0x20000000000000) {\n        return add(upscaleWithinI53AndLoopCheck(min - 1, max - 1), 1);\n      } else {\n        return upscaleWithinI53AndLoopCheck(min, max);\n      }\n    };\n  }());\n  proto.integer = function (min, max) {\n    return Random.integer(min, max)(this.engine);\n  };\n\n  // [0, 1] (floating point)\n  Random.realZeroToOneInclusive = function (engine) {\n    return Random.uint53Full(engine) / 0x20000000000000;\n  };\n  proto.realZeroToOneInclusive = function () {\n    return Random.realZeroToOneInclusive(this.engine);\n  };\n\n  // [0, 1) (floating point)\n  Random.realZeroToOneExclusive = function (engine) {\n    return Random.uint53(engine) / 0x20000000000000;\n  };\n  proto.realZeroToOneExclusive = function () {\n    return Random.realZeroToOneExclusive(this.engine);\n  };\n\n  Random.real = (function () {\n    function multiply(generate, multiplier) {\n      if (multiplier === 1) {\n        return generate;\n      } else if (multiplier === 0) {\n        return function () {\n          return 0;\n        };\n      } else {\n        return function (engine) {\n          return generate(engine) * multiplier;\n        };\n      }\n    }\n\n    return function (left, right, inclusive) {\n      if (!isFinite(left)) {\n        throw new RangeError(\"Expected left to be a finite number\");\n      } else if (!isFinite(right)) {\n        throw new RangeError(\"Expected right to be a finite number\");\n      }\n      return add(\n        multiply(\n          inclusive ? Random.realZeroToOneInclusive : Random.realZeroToOneExclusive,\n          right - left),\n        left);\n    };\n  }());\n  proto.real = function (min, max, inclusive) {\n    return Random.real(min, max, inclusive)(this.engine);\n  };\n\n  Random.bool = (function () {\n    function isLeastBitTrue(engine) {\n      return (engine() & 1) === 1;\n    }\n\n    function lessThan(generate, value) {\n      return function (engine) {\n        return generate(engine) < value;\n      };\n    }\n\n    function probability(percentage) {\n      if (percentage <= 0) {\n        return returnValue(false);\n      } else if (percentage >= 1) {\n        return returnValue(true);\n      } else {\n        var scaled = percentage * 0x100000000;\n        if (scaled % 1 === 0) {\n          return lessThan(Random.int32, (scaled - 0x80000000) | 0);\n        } else {\n          return lessThan(Random.uint53, Math.round(percentage * 0x20000000000000));\n        }\n      }\n    }\n\n    return function (numerator, denominator) {\n      if (denominator == null) {\n        if (numerator == null) {\n          return isLeastBitTrue;\n        }\n        return probability(numerator);\n      } else {\n        if (numerator <= 0) {\n          return returnValue(false);\n        } else if (numerator >= denominator) {\n          return returnValue(true);\n        }\n        return lessThan(Random.integer(0, denominator - 1), numerator);\n      }\n    };\n  }());\n  proto.bool = function (numerator, denominator) {\n    return Random.bool(numerator, denominator)(this.engine);\n  };\n\n  function toInteger(value) {\n    var number = +value;\n    if (number < 0) {\n      return Math.ceil(number);\n    } else {\n      return Math.floor(number);\n    }\n  }\n\n  function convertSliceArgument(value, length) {\n    if (value < 0) {\n      return Math.max(value + length, 0);\n    } else {\n      return Math.min(value, length);\n    }\n  }\n  Random.pick = function (engine, array, begin, end) {\n    var length = array.length;\n    var start = begin == null ? 0 : convertSliceArgument(toInteger(begin), length);\n    var finish = end === void 0 ? length : convertSliceArgument(toInteger(end), length);\n    if (start >= finish) {\n      return void 0;\n    }\n    var distribution = Random.integer(start, finish - 1);\n    return array[distribution(engine)];\n  };\n  proto.pick = function (array, begin, end) {\n    return Random.pick(this.engine, array, begin, end);\n  };\n\n  function returnUndefined() {\n    return void 0;\n  }\n  var slice = Array.prototype.slice;\n  Random.picker = function (array, begin, end) {\n    var clone = slice.call(array, begin, end);\n    if (!clone.length) {\n      return returnUndefined;\n    }\n    var distribution = Random.integer(0, clone.length - 1);\n    return function (engine) {\n      return clone[distribution(engine)];\n    };\n  };\n\n  Random.shuffle = function (engine, array, downTo) {\n    var length = array.length;\n    if (length) {\n      if (downTo == null) {\n        downTo = 0;\n      }\n      for (var i = (length - 1) >>> 0; i > downTo; --i) {\n        var distribution = Random.integer(0, i);\n        var j = distribution(engine);\n        if (i !== j) {\n          var tmp = array[i];\n          array[i] = array[j];\n          array[j] = tmp;\n        }\n      }\n    }\n    return array;\n  };\n  proto.shuffle = function (array) {\n    return Random.shuffle(this.engine, array);\n  };\n\n  Random.sample = function (engine, population, sampleSize) {\n    if (sampleSize < 0 || sampleSize > population.length || !isFinite(sampleSize)) {\n      throw new RangeError(\"Expected sampleSize to be within 0 and the length of the population\");\n    }\n\n    if (sampleSize === 0) {\n      return [];\n    }\n\n    var clone = slice.call(population);\n    var length = clone.length;\n    if (length === sampleSize) {\n      return Random.shuffle(engine, clone, 0);\n    }\n    var tailLength = length - sampleSize;\n    return Random.shuffle(engine, clone, tailLength - 1).slice(tailLength);\n  };\n  proto.sample = function (population, sampleSize) {\n    return Random.sample(this.engine, population, sampleSize);\n  };\n\n  Random.die = function (sideCount) {\n    return Random.integer(1, sideCount);\n  };\n  proto.die = function (sideCount) {\n    return Random.die(sideCount)(this.engine);\n  };\n\n  Random.dice = function (sideCount, dieCount) {\n    var distribution = Random.die(sideCount);\n    return function (engine) {\n      var result = [];\n      result.length = dieCount;\n      for (var i = 0; i < dieCount; ++i) {\n        result[i] = distribution(engine);\n      }\n      return result;\n    };\n  };\n  proto.dice = function (sideCount, dieCount) {\n    return Random.dice(sideCount, dieCount)(this.engine);\n  };\n\n  // http://en.wikipedia.org/wiki/Universally_unique_identifier\n  Random.uuid4 = (function () {\n    function zeroPad(string, zeroCount) {\n      return stringRepeat(\"0\", zeroCount - string.length) + string;\n    }\n\n    return function (engine) {\n      var a = engine() >>> 0;\n      var b = engine() | 0;\n      var c = engine() | 0;\n      var d = engine() >>> 0;\n\n      return (\n        zeroPad(a.toString(16), 8) +\n        \"-\" +\n        zeroPad((b & 0xffff).toString(16), 4) +\n        \"-\" +\n        zeroPad((((b >> 4) & 0x0fff) | 0x4000).toString(16), 4) +\n        \"-\" +\n        zeroPad(((c & 0x3fff) | 0x8000).toString(16), 4) +\n        \"-\" +\n        zeroPad(((c >> 4) & 0xffff).toString(16), 4) +\n        zeroPad(d.toString(16), 8));\n    };\n  }());\n  proto.uuid4 = function () {\n    return Random.uuid4(this.engine);\n  };\n\n  Random.string = (function () {\n    // has 2**x chars, for faster uniform distribution\n    var DEFAULT_STRING_POOL = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-\";\n\n    return function (pool) {\n      if (pool == null) {\n        pool = DEFAULT_STRING_POOL;\n      }\n\n      var length = pool.length;\n      if (!length) {\n        throw new Error(\"Expected pool not to be an empty string\");\n      }\n\n      var distribution = Random.integer(0, length - 1);\n      return function (engine, length) {\n        var result = \"\";\n        for (var i = 0; i < length; ++i) {\n          var j = distribution(engine);\n          result += pool.charAt(j);\n        }\n        return result;\n      };\n    };\n  }());\n  proto.string = function (length, pool) {\n    return Random.string(pool)(this.engine, length);\n  };\n\n  Random.hex = (function () {\n    var LOWER_HEX_POOL = \"0123456789abcdef\";\n    var lowerHex = Random.string(LOWER_HEX_POOL);\n    var upperHex = Random.string(LOWER_HEX_POOL.toUpperCase());\n\n    return function (upper) {\n      if (upper) {\n        return upperHex;\n      } else {\n        return lowerHex;\n      }\n    };\n  }());\n  proto.hex = function (length, upper) {\n    return Random.hex(upper)(this.engine, length);\n  };\n\n  Random.date = function (start, end) {\n    if (!(start instanceof Date)) {\n      throw new TypeError(\"Expected start to be a Date, got \" + typeof start);\n    } else if (!(end instanceof Date)) {\n      throw new TypeError(\"Expected end to be a Date, got \" + typeof end);\n    }\n    var distribution = Random.integer(start.getTime(), end.getTime());\n    return function (engine) {\n      return new Date(distribution(engine));\n    };\n  };\n  proto.date = function (start, end) {\n    return Random.date(start, end)(this.engine);\n  };\n\n  if (typeof define === \"function\" && define.amd) {\n    define(function () {\n      return Random;\n    });\n  } else if (typeof module !== \"undefined\" && typeof require === \"function\") {\n    module.exports = Random;\n  } else {\n    (function () {\n      var oldGlobal = root[GLOBAL_KEY];\n      Random.noConflict = function () {\n        root[GLOBAL_KEY] = oldGlobal;\n        return this;\n      };\n    }());\n    root[GLOBAL_KEY] = Random;\n  }\n}(this));"],"names":["Object","defineProperty","exports","value","factory_class_1","require","node_attributes_class_1","ExpressionNode","type","parent","prototype","copy","_this","Factory","create","attributes","keys","forEach","attr","setAttribute","children","child","addChild","node","insertChild","index","Error","splice","length","clearChildren","undefined","removeChild","expression","indexOf","getParent","getChild","getChildCount","forEachChild","fn","slice","getAttribute","key","NodeAttributes","toJSON","filter","k","obj","expression_node_class_1","__export","m","p","hasOwnProperty","NodeType","generator_1","dice_interpreter_class_1","dice_lexer_class_1","dice_parser_class_1","Dice","functions","randomProvider","options","roll","input","lexer","createLexer","parser","createParser","interpreter","createInterpreter","parseResult","parse","interpret","root","DiceLexer","DiceParser","DiceInterpreter","createGenerator","DiceGenerator","Ast","generate","Number","generateNumber","Add","generateAdd","Subtract","generateSubtract","Multiply","generateMultiply","Divide","generateDivide","Modulo","generateModulo","Exponent","generateExponent","Negate","generateNegate","generateDice","DiceSides","generateDiceSides","DiceRoll","generateDiceRoll","Function","generateFunction","Group","generateGroup","Repeat","generateRepeat","Equal","generateEqual","Greater","generateGreater","GreaterOrEqual","generateGreaterOrEqual","Less","generateLess","LessOrEqual","generateLessOrEqual","Explode","generateExplode","Keep","generateKeep","Drop","generateDrop","Critical","generateCritical","Reroll","generateReroll","Sort","generateSort","toString","expectChildCount","generateCommaList","generateWithParens","val","generateEqualityExpression","exp","critical","reroll","sort","operator","buffer","x","count","findCount","function_definition_list_class_1","DefaultFunctionDefinitions","FunctionDefinitionList","functionNode","errors","Math","floor","evaluate","ceil","abs","round","sqrt","random_1","default_function_definitions_1","dice_result_class_1","error_message_class_1","random","generator","assign","DefaultRandomProvider","total","successes","countSuccesses","fails","countFailures","renderedExpression","DiceResult","push","InterpreterError","evaluateDiceRoll","evaluateNumber","evaluateDiceSides","evaluateAdd","evaluateSubtract","evaluateMultiply","evaluateDivide","evaluateModulo","evaluateNegate","evaluateExponent","evaluateDice","evaluateFunction","evaluateGroup","evaluateRepeat","evaluateExplode","evaluateKeep","evaluateDrop","evaluateCritical","evaluateReroll","evaluateSort","evaluateEqual","evaluateGreater","evaluateGreaterOrEqual","evaluateLess","evaluateLessOrEqual","pow","num","_a","maxRollTimes","maxDiceSides","sides","sidesValue","diceRoll","createDiceRoll","fName","result","lhs","times","dice","findDiceOrGroupNode","penetrate","condition","wouldRollAgainForever","newRolls","die","dieValue","evaluateComparison","newRoll","countTotal","rolls","getSortedDiceRolls","once","createDiceRollValue","evaluateSuccess","l","r","countSuccessOrFailure","err","compare","rhv","diceOrGroup","res","direction","output","sortOrder","a","b","minValue","maxValue","numberBetween","wouldRunForever","__extends","extendStatics","d","setPrototypeOf","__proto__","Array","__","constructor","result_class_1","_super","failures","call","Result","message","stack","reducedExpression","string_character_stream_class_1","token_class_1","token_type_enum_1","numCharRegex","idCharRegex","isCharacterStream","stream","StringCharacterStream","getCurrentCharacter","peekNextToken","nextToken","constructNextToken","getNextToken","currentToken","parseIdentifier","peekNextCharacter","test","getNextCharacter","createToken","TokenType","Identifier","parseNumber","hasDot","nextChar","parseEllipsis","Ellipsis","curChar","BraceOpen","BraceClose","Comma","ParenthesisOpen","ParenthesisClose","Equals","Plus","Slash","Minus","Percent","Exclamation","DoubleAsterisk","Asterisk","Terminator","position","getCurrentPosition","Token","NonGlobalDefinitionError","min","lexer_1","BasicParser","isLexer","expectAndConsume","expected","actual","expect","errorToken","errorMessage","token","ParserError","basic_parser_class_1","parse_result_class_1","BooleanOperatorMap","AddOperatorMap","MultiOperatorMap","ParseResult","parseExpression","parseSimpleExpression","tokenType","newRoot","parseTerm","negateNode","parseFactor","parseDice","parseFunction","parseBracketedExpression","parseGroup","number","parseSimpleFactor","functionName","numberToken","parseRepeat","parseGroupModifiers","rollTimes","parseDiceRoll","parseDiceModifiers","sidesToken","parseExplode","parseCompareModifier","parseCritical","parseKeep","parseDrop","parseReroll","parseSort","stackTrace","Random","engines","mt19937","autoSeed","max","integer","GLOBAL_KEY","imul","ah","al","bh","bl","stringRepeat","String","repeat","y","pattern","engine","nativeMath","TypeError","proto","Int32Array","refreshData","data","tmp","temper","seedWithArray","source","i","j","sourceLength","previous","uses","next","getUseCount","discard","seed","initial","generateEntropyArray","browserCrypto","crypto","getRandomValues","array","Date","getTime","returnValue","int32","uint32","uint53","high","low","uint53Full","int53","int53Full","add","addend","isPowerOfTwoMinusOne","bitmask","masking","downscaleToLoopCheckedRange","range","extendedRange","maximum","downscaleToRange","isEvenlyDivisibleByMaxInt32","upscaleWithHighMasking","upscaleToLoopCheckedRange","ret","upscaleWithinU53","highRange","upscaleWithinI53AndLoopCheck","isFinite","RangeError","realZeroToOneInclusive","realZeroToOneExclusive","real","multiply","multiplier","left","right","inclusive","bool","isLeastBitTrue","lessThan","probability","percentage","scaled","numerator","denominator","toInteger","convertSliceArgument","pick","begin","end","start","finish","distribution","returnUndefined","picker","clone","shuffle","downTo","sample","population","sampleSize","tailLength","sideCount","dieCount","uuid4","zeroPad","string","zeroCount","c","DEFAULT_STRING_POOL","pool","charAt","hex","LOWER_HEX_POOL","lowerHex","upperHex","toUpperCase","upper","date","define","amd","module","oldGlobal","noConflict"],"sourceRoot":"webpack:///"}